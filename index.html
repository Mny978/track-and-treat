<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Track and Treat - Personalized Dietetics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #0d9488; /* Teal 600 */
            --color-primary-hover: #0f766e; /* Teal 700 */
            --color-secondary: #f59e0b; /* Amber 500 */
            --color-secondary-hover: #d97706; /* Amber 600 */
            --color-accent: #3b82f6; /* Blue 500 */
            --color-background: #f9fafb; /* Gray 50 */
            --color-card: #ffffff;
            --color-text-primary: #1f2937; /* Gray 800 */
            --color-text-secondary: #6b7280; /* Gray 500 */
            --color-border: #e5e7eb; /* Gray 200 */
        }
        html.dark {
            --color-primary: #2dd4bf; /* Teal 400 */
            --color-primary-hover: #14b8a6; /* Teal 500 */
            --color-secondary: #fbbf24; /* Amber 400 */
            --color-secondary-hover: #f59e0b; /* Amber 500 */
            --color-accent: #60a5fa; /* Blue 400 */
            --color-background: #111827; /* Gray 900 */
            --color-card: #1f2937; /* Gray 800 */
            --color-text-primary: #f3f4f6; /* Gray 100 */
            --color-text-secondary: #9ca3af; /* Gray 400 */
            --color-border: #374151; /* Gray 700 */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--color-background);
            color: var(--color-text-primary);
        }
        .custom-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: var(--color-primary);
            border-radius: 10px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #e0e0e0;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react-dom/client": "https://aistudiocdn.com/react-dom@^19.2.0/client",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "lucide-react": "https://esm.sh/lucide-react@0.263.1?external=react",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
    "recharts": "https://aistudiocdn.com/recharts@^2.12.7",
    "@testing-library/react": "https://aistudiocdn.com/@testing-library/react@^16.3.0",
    "@testing-library/jest-dom": "https://aistudiocdn.com/@testing-library/jest-dom@^6.9.1",
    "@jest/globals": "https://aistudiocdn.com/@jest/globals@^30.2.0"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module">
        import React from 'react';
        import ReactDOM from 'react-dom/client';
        import { GoogleGenAI } from "@google/genai";
        import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

        // --- INLINED CODE FROM ALL .TS/.TSX FILES ---

        // FROM: constants/localization.ts
        const appStrings = {
            en: {
                appTitle: "Track and Treat - Personalized Dietetics",
                languageLabel: "Language",
                welcomeHeader: "Welcome to Track and Treat!",
                navDashboard: "Dashboard",
                navProfile: "Profile & Goals",
                navPlan: "My Diet Plan",
                navTracking: "Tracking",
                navRecipes: "Recipes",
                navReports: "Report Analysis",
                navGuidance: "Nutrient Guidance",
                navSearch: "Health Search",
                navChat: "AI Assistant",
                navFeedback: "Feedback",
                
                // Dashboard
                dashSnapshotHeader: "Your Health Snapshot",
                dashBMI: "BMI",
                dashBMICalc: "Enter details to calculate.",
                dashTarget: "Daily Calorie Target",
                dashBaseGoal: "Based on TDEE & Goal",
                dashWater: "Water Today",
                dashWaterGoal: "Goal: 3.5 L",
                dashStreak: "Plan Streak",
                dashKeepUp: "Keep up the great work!",
                dashTipHeader: "Today's Tip from Track and Treat",
                dashTipInitial: "Please complete your profile details to unlock your first personalized tip from our specialized dietary algorithms!",
                dashProgressHeader: "Weekly Weight Loss Progress",
                
                // Profile
                profileHeader: "Your Essential Details & Goals",
                metricHeader: "Personal Metrics",
                labelName: "Name",
                labelAge: "Age (Years)",
                labelGender: "Gender",
                genderMale: "Male",
                genderFemale: "Female",
                genderOther: "Other",
                labelWeight: "Weight (kg)",
                labelHeight: "Height (cm)",
                labelActivity: "Activity Level",
                activitySedentary: "Sedentary (desk job)",
                activityLight: "Light (1-3 days/week exercise)",
                activityModerate: "Moderate (3-5 days/week exercise)",
                activityHigh: "High (6-7 days/week exercise)",
                activityExtreme: "Extreme (Athlete/heavy labor)",
                labelDiet: "Dietary Preference",
                dietVeg: "Vegetarian",
                dietNonVeg: "Non-Vegetarian",
                dietVegan: "Vegan",
                dietJain: "Jain",
                labelGoal: "Primary Goal",
                goalLoss: "Weight Loss",
                goalGain: "Weight Gain",
                goalMaintain: "Health Maintenance",
                goalMuscle: "Muscle Gain",
                medicalHeader: "Medical & Preferences (Specialized Details)",
                labelCondition: "Medical Conditions (Diabetes, PCOS, Thyroid, etc.)",
                labelAllergies: "Allergies & Intolerances",
                labelDislikes: "Food Dislikes / Likes",
                labelProfilePhoto: "Profile Photo",
                btnSaveProfile: "Save Profile & Generate Assessment",
                btnAiSummary: "✨ Get AI Health Summary",
                aiSummaryTitle: "AI Health Summary",
                macroGoalsHeader: "Macronutrient Goals (Grams)",
                labelProteinGoal: "Protein Goal (g)",
                labelCarbGoal: "Carbohydrate Goal (g)",
                labelFatGoal: "Fat Goal (g)",
                assessmentHeader: "Your Health Assessment Summary",
                calcBMI: "BMI",
                calcBMIStatus: "BMI Status",
                calcTDEE: "TDEE",
                calcReqCals: "Req. Calories",
                calcProtein: "Protein Goal",
                calcCarbs: "Carbs Goal",
                calcFat: "Fat Goal",
                macroHeader: "Estimated Macronutrient Distribution:",
                
                // Diet Plan
                planHeader: "My Diet Plan",
                btnGeneratePlan: "✨ Generate Detailed 3-Day Plan",
                planInitialPrompt: "Please save your profile details to see a static plan, or click the '✨ Generate Detailed 3-Day Plan' button to use the AI planner for a custom meal plan!",
                
                // Tracking
                trackerHeader: "Track Your Daily Intake",
                logHeader: "Meal Log",
                btnAnalyzeLog: "✨ Analyze Log",
                logAnalysisTitle: "Log Analysis:",
                logEmpty: "Your daily meal log will appear here.",
                logInputPlaceholder: "Log your meal (e.g., Lunch: 1 bowl Rajma, Rice, Salad) & quantity",
                logBtn: "Log Meal",
                waterHeader: "Water Intake",
                waterGoal: "Goal: 3.5 Litres",
                btnAddWater: "+ 250ml",
                servingsHeader: "Fruit/Veg Servings",
                btnAddServing: "+ Add Serving",
                reminderHeader: "Compliance Reminders",
                reminderText: "Set up custom meal and water reminders below for better compliance!",
                btnSetReminder: "Set Reminders",
                btnHideReminders: "Hide Reminders",
                newReminder: "New Reminder",
                reminderTime: "Time",
                reminderType: "Type",
                reminderMeal: "Meal",
                reminderWater: "Water",
                btnAddReminder: "Add Reminder",
                noRemindersSet: "No reminders set yet.",
        
                // Recipes
                recipesMainHeader: "Personalized Recipes & Ingredient Explorer",
                recipeDiagHeader: "Recipes for My Condition",
                recipeDiagStatus: "Click below to generate specialized recipes based on your saved medical condition",
                btnGenerateDiag: "Generate Recipes for Condition",
                recipeIngrHeader: "Innovative Ingredient Recipes",
                ingrInputPlaceholder: "Enter one main ingredient (e.g., Paneer, Bajra, Okra)",
                btnSuggestRecipes: "Suggest 3 Innovative Recipes",
                
                // Reports
                reportsMainHeader: "Medical Report Interpretation",
                reportsAnalyzeHeader: "Analyze Your Reports",
                reportsInstructions: "Paste the critical findings from your blood test or medical report below (e.g., 'HbA1c: 7.5%, Vitamin D: 12 ng/mL, TSH: 8.0'). Our system will explain the diagnosis.",
                reportsInputPlaceholder: "Enter findings here...",
                btnInterpretReport: "Interpret Report & Get Diagnosis",
        
                // Guidance
                guidanceMainHeader: "Targeted Nutritional Guidance",
                guidanceFindHeader: "Find Nutrients & Food Sources",
                guidanceInstructions: "Enter a medical condition, deficiency, or key symptoms (e.g., Iron deficiency, low energy, Type 2 Diabetes).",
                guidanceInputPlaceholder: "Enter diagnosis, deficiency, or symptoms (e.g., Vitamin B12 deficiency)",
                btnNutrientsAvoid: "Key Nutrients / Avoid",
                btnFoodSources: "Top Food Sources",
                btnInteractions: "Drug Interactions",
                guidanceOutputInitial: "Results will appear here after selecting an option above.",
        
                // Search
                searchMainHeader: "Grounded Health Search",
                searchInstructions: "Ask any health or nutrition question. The AI will use Google Search to provide the most up-to-date information.",
                searchInputPlaceholder: "e.g., latest research on intermittent fasting for diabetes",
                btnSearch: "Search with Google",
                searchResultsTitle: "Search Results",
                sourcesTitle: "Sources",
                searchInitialPrompt: "Your search results will appear here.",
        
                // Chat
                chatMainHeader: "AI Assistant",
                chatWelcome: "Hello! I'm your AI health assistant. How can I help you today with your diet, nutrition, or fitness questions?",
                chatInputPlaceholder: "Ask me anything about nutrition...",
                btnClearChat: "Clear Chat",
        
                // Feedback
                feedbackTitle: "Submit Feedback",
                feedbackType: "Feedback Type",
                feedbackTypeBug: "Bug Report",
                feedbackTypeSuggestion: "Suggestion",
                feedbackTypeGeneral: "General Comment",
                feedbackContent: "Your Feedback",
                btnSubmitFeedback: "Submit Feedback",
                feedbackSuccess: "Thank you! Your feedback has been saved.",
            },
            hi: {
                appTitle: "ट्रैक एंड ट्रीट - व्यक्तिगत पोषण",
                languageLabel: "भाषा",
                welcomeHeader: "ट्रैक एंड ट्रीट में आपका स्वागत है!",
                navDashboard: "डैशबोर्ड",
                navProfile: "प्रोफाइल और लक्ष्य",
                navPlan: "मेरा आहार योजना",
                navTracking: "ट्रैकिंग",
                navRecipes: "रेसिपी",
                navReports: "रिपोर्ट विश्लेषण",
                navGuidance: "पोषक तत्व मार्गदर्शन",
                navSearch: "स्वास्थ्य खोज",
                navChat: "एआई सहायक",
                navFeedback: "प्रतिक्रिया",
                
                dashSnapshotHeader: "आपका स्वास्थ्य स्नैपशॉट",
                dashBMI: "बीएमआई",
                dashBMICalc: "गणना के लिए विवरण दर्ज करें।",
                dashTarget: "दैनिक कैलोरी लक्ष्य",
                dashBaseGoal: "टीडीईई और लक्ष्य पर आधारित",
                dashWater: "आज का पानी",
                dashWaterGoal: "लक्ष्य: 3.5 लीटर",
                dashStreak: "योजना स्ट्रीक",
                dashKeepUp: "अच्छा काम करते रहें!",
                dashTipHeader: "ट्रैक एंड ट्रीट से आज की टिप",
                dashTipInitial: "कृपया अपनी व्यक्तिगत आहार युक्ति अनलॉक करने के लिए प्रोफ़ाइल विवरण भरें!",
                dashProgressHeader: "साप्ताहिक वजन घटाने की प्रगति",
        
                profileHeader: "आपके आवश्यक विवरण और लक्ष्य",
                metricHeader: "व्यक्तिगत मेट्रिक्स",
                labelName: "नाम",
                labelAge: "आयु (वर्ष)",
                labelGender: "लिंग",
                genderMale: "पुरुष",
                genderFemale: "महिला",
                genderOther: "अन्य",
                labelWeight: "वजन (किलो)",
                labelHeight: "ऊंचाई (सेमी)",
                labelActivity: "गतिविधि स्तर",
                activitySedentary: "निष्क्रिय (डेस्क की नौकरी)",
                activityLight: "हल्का (1-3 दिन/सप्ताह व्यायाम)",
                activityModerate: "मध्यम (3-5 दिन/सप्ताह व्यायाम)",
                activityHigh: "उच्च (6-7 दिन/सप्ताह व्यायाम)",
                activityExtreme: "अत्यधिक (एथलीट/भारी श्रम)",
                labelDiet: "आहार प्राथमिकता",
                dietVeg: "शाकाहारी",
                dietNonVeg: "मांसाहारी",
                dietVegan: "शाकाहारी (वीगन)",
                dietJain: "जैन",
                labelGoal: "प्राथमिक लक्ष्य",
                goalLoss: "वजन घटाना",
                goalGain: "वजन बढ़ाना",
                goalMaintain: "स्वास्थ्य रखरखाव",
                goalMuscle: "मांसपेशियों का लाभ",
                medicalHeader: "चिकित्सा और प्राथमिकताएँ (विशेष विवरण)",
                labelCondition: "चिकित्सा स्थितियां (मधुमेह, पीसीओएस, थायराइड, आदि)",
                labelAllergies: "एलर्जी और असहिष्णुता",
                labelDislikes: "नापसंद / पसंद के खाद्य पदार्थ",
                labelProfilePhoto: "प्रोफ़ाइल फ़ोटो",
                btnSaveProfile: "प्रोफाइल सहेजें और मूल्यांकन उत्पन्न करें",
                btnAiSummary: "✨ एआई स्वास्थ्य सारांश प्राप्त करें",
                aiSummaryTitle: "एआई स्वास्थ्य सारांश",
                macroGoalsHeader: "मैक्रोन्यूट्रिएंट लक्ष्य (ग्राम)",
                labelProteinGoal: "प्रोटीन लक्ष्य (ग्राम)",
                labelCarbGoal: "कार्बोहाइड्रेट लक्ष्य (ग्राम)",
                labelFatGoal: "वसा लक्ष्य (ग्राम)",
                assessmentHeader: "आपका स्वास्थ्य मूल्यांकन सारांश",
                calcBMI: "बीएमआई",
                calcBMIStatus: "बीएमआई स्थिति",
                calcTDEE: "टीडीईई",
                calcReqCals: "आवश्यक कैलोरी",
                calcProtein: "प्रोटीन लक्ष्य",
                calcCarbs: "कार्ब्स लक्ष्य",
                calcFat: "वसा लक्ष्य",
                macroHeader: "अनुमानित मैक्रोन्यूट्रिएंट वितरण:",
        
                planHeader: "मेरी आहार योजना",
                btnGeneratePlan: "✨ विस्तृत 3-दिवसीय योजना बनाएं",
                planInitialPrompt: "स्थिर योजना देखने के लिए अपनी प्रोफ़ाइल विवरण सहेजें, या कस्टम भोजन योजना के लिए एआई प्लानर का उपयोग करने हेतु '✨ विस्तृत 3-दिवसीय योजना बनाएं' बटन पर क्लिक करें!",
        
                trackerHeader: "अपने दैनिक सेवन को ट्रैक करें",
                logHeader: "भोजन लॉग",
                btnAnalyzeLog: "✨ लॉग का विश्लेषण करें",
                logAnalysisTitle: "लॉग विश्लेषण:",
                logEmpty: "आपका दैनिक भोजन लॉग यहां दिखाई देगा।",
                logInputPlaceholder: "अपना भोजन लॉग करें (उदा. दोपहर का भोजन: 1 कटोरी राजमा, चावल, सलाद) और मात्रा",
                logBtn: "भोजन लॉग करें",
                waterHeader: "पानी का सेवन",
                waterGoal: "लक्ष्य: 3.5 लीटर",
                btnAddWater: "+ 250मि.ली.",
                servingsHeader: "फल/सब्जी सर्विंग",
                btnAddServing: "+ सर्विंग जोड़ें",
                reminderHeader: "अनुपालन अनुस्मारक",
                reminderText: "बेहतर अनुपालन के लिए नीचे कस्टम भोजन और पानी के अनुस्मारक सेट करें!",
                btnSetReminder: "अनुस्मारक सेट करें",
                btnHideReminders: "अनुस्मारक छिपाएं",
                newReminder: "नया अनुस्मारक",
                reminderTime: "समय",
                reminderType: "प्रकार",
                reminderMeal: "भोजन",
                reminderWater: "पानी",
                btnAddReminder: "अनुस्मारक जोड़ें",
                noRemindersSet: "अभी तक कोई अनुस्मारक सेट नहीं है।",
        
                recipesMainHeader: "व्यक्तिगत रेसिपी और सामग्री अन्वेषक",
                recipeDiagHeader: "मेरी स्थिति के लिए रेसिपी",
                recipeDiagStatus: "अपनी सहेजी गई चिकित्सीय स्थिति के आधार पर विशिष्ट रेसिपी बनाने के लिए नीचे क्लिक करें",
                btnGenerateDiag: "स्थिति के लिए रेसिपी बनाएं",
                recipeIngrHeader: "अभिनव सामग्री रेसिपी",
                ingrInputPlaceholder: "एक मुख्य सामग्री दर्ज करें (उदा. पनीर, बाजरा, भिंडी)",
                btnSuggestRecipes: "3 अभिनव रेसिपी सुझाएं",
                
                reportsMainHeader: "चिकित्सा रिपोर्ट की व्याख्या",
                reportsAnalyzeHeader: "अपनी रिपोर्ट का विश्लेषण करें",
                reportsInstructions: "नीचे अपनी रक्त परीक्षण या चिकित्सा रिपोर्ट के महत्वपूर्ण निष्कर्ष पेस्ट करें (उदा. 'एचबीए1सी: 7.5%, विटामिन डी: 12 एनजी/एमएल, टीएसएच: 8.0')। हमारा सिस्टम निदान समझाएगा।",
                reportsInputPlaceholder: "निष्कर्ष यहां दर्ज करें...",
                btnInterpretReport: "रिपोर्ट की व्याख्या करें और निदान प्राप्त करें",
        
                guidanceMainHeader: "लक्षित पोषण मार्गदर्शन",
                guidanceFindHeader: "पोषक तत्व और खाद्य स्रोत खोजें",
                guidanceInstructions: "एक चिकित्सीय स्थिति, कमी, या मुख्य लक्षण दर्ज करें (उदा. आयरन की कमी, कम ऊर्जा, टाइप 2 मधुमेह)।",
                guidanceInputPlaceholder: "निदान, कमी, या लक्षण दर्ज करें (उदा. विटामिन बी12 की कमी)",
                btnNutrientsAvoid: "मुख्य पोषक तत्व / बचें",
                btnFoodSources: "शीर्ष खाद्य स्रोत",
                btnInteractions: "दवा परस्पर क्रिया",
                guidanceOutputInitial: "ऊपर दिए गए विकल्प का चयन करने के बाद परिणाम यहां दिखाई देंगे।",
        
                // Search
                searchMainHeader: "ग्राउंडेड स्वास्थ्य खोज",
                searchInstructions: "कोई भी स्वास्थ्य या पोषण संबंधी प्रश्न पूछें। एआई सबसे अद्यतित जानकारी प्रदान करने के लिए गूगल खोज का उपयोग करेगा।",
                searchInputPlaceholder: "उदा., मधुमेह के लिए रुक-रुक कर उपवास पर नवीनतम शोध",
                btnSearch: "गूगल से खोजें",
                searchResultsTitle: "खोज के परिणाम",
                sourcesTitle: "स्रोत",
                searchInitialPrompt: "आपके खोज परिणाम यहां दिखाई देंगे।",
                
                // Chat
                chatMainHeader: "एआई सहायक",
                chatWelcome: "नमस्ते! मैं आपका एआई स्वास्थ्य सहायक हूं। आज मैं आपके आहार, पोषण, या फिटनेस संबंधी सवालों में कैसे मदद कर सकता हूं?",
                chatInputPlaceholder: "पोषण के बारे में कुछ भी पूछें...",
                btnClearChat: "चैट साफ़ करें",
        
                // Feedback
                feedbackTitle: "प्रतिक्रिया भेजें",
                feedbackType: "प्रतिक्रिया का प्रकार",
                feedbackTypeBug: "बग रिपोर्ट",
                feedbackTypeSuggestion: "सुझाव",
                feedbackTypeGeneral: "सामान्य टिप्पणी",
                feedbackContent: "आपकी प्रतिक्रिया",
                btnSubmitFeedback: "प्रतिक्रिया भेजें",
                feedbackSuccess: "धन्यवाद! आपकी प्रतिक्रिया सहेज ली गई है।",
            },
            gu: {
                appTitle: "ટ્રેક એન્ડ ટ્રીટ - વ્યક્તિગત આહારશાસ્ત્ર",
                languageLabel: "ભાષા",
                welcomeHeader: "ટ્રેક એન્ડ ટ્રીટમાં તમારું સ્વાગત છે!",
                navDashboard: "ડેશબોર્ડ",
                navProfile: "પ્રોફાઇલ અને લક્ષ્યો",
                navPlan: "મારો આહાર પ્લાન",
                navTracking: "ટ્રેકિંગ",
                navRecipes: "વાનગીઓ",
                navReports: "રિપોર્ટ વિશ્લેષણ",
                navGuidance: "પોષક માર્ગદર્શન",
                navSearch: "આરોગ્ય શોધ",
                navChat: "AI સહાયક",
                navFeedback: "પ્રતિસાદ",
                
                dashSnapshotHeader: "તમારો સ્વાસ્થ્ય સ્નેપશોટ",
                dashBMI: "BMI",
                dashBMICalc: "ગણતરી માટે વિગતો દાખલ કરો.",
                dashTarget: "દૈનિક કેલરી લક્ષ્ય",
                dashBaseGoal: "TDEE અને લક્ષ્ય પર આધારિત",
                dashWater: "આજનું પાણી",
                dashWaterGoal: "લક્ષ્ય: 3.5 લિટર",
                dashStreak: "પ્લાન સ્ટ્રીક",
                dashKeepUp: "આટલું સારું કામ કરતા રહો!",
                dashTipHeader: "ટ્રેક એન્ડ ટ્રીટ તરફથી આજની ટિપ",
                dashTipInitial: "તમારી વ્યક્તિગત આહાર ટિપ અનલૉક કરવા માટે કૃપા કરીને તમારી પ્રોફાઇલ વિગતો પૂર્ણ કરો!",
                dashProgressHeader: "સાપ્તાહિક વજન ઘટાડવાની પ્રગતિ",
        
                profileHeader: "તમારી આવશ્યક વિગતો અને લક્ષ્યો",
                metricHeader: "વ્યક્તિગત મેટ્રિક્સ",
                labelName: "નામ",
                labelAge: "ઉંમર (વર્ષ)",
                labelGender: "લિંગ",
                genderMale: "પુરુષ",
                genderFemale: "સ્ત્રી",
                genderOther: "અન્ય",
                labelWeight: "વજન (કિલો)",
                labelHeight: "ઊંચાઈ (સેમી)",
                labelActivity: "પ્રવૃત્તિ સ્તર",
                activitySedentary: "બેઠાડુ (ડેસ્ક જોબ)",
                activityLight: "હળવું (1-3 દિવસ/અઠવાડિયું કસરત)",
                activityModerate: "મધ્યમ (3-5 દિવસ/અઠવાડિયું કસરત)",
                activityHigh: "ઉચ્ચ (6-7 દિવસ/અઠવાડિયું કસરત)",
                activityExtreme: "અત્યંત (એથ્લેટ/ભારે શ્રમ)",
                labelDiet: "આહાર પસંદગી",
                dietVeg: "શાકાહારી",
                dietNonVeg: "માંસાહારી",
                dietVegan: "શાકાહારી (વેગન)",
                dietJain: "જૈન",
                labelGoal: "પ્રાથમિક લક્ષ્ય",
                goalLoss: "વજન ઘટાડવું",
                goalGain: "વજન વધારવું",
                goalMaintain: "સ્વાસ્થ્ય જાળવણી",
                goalMuscle: "સ્નાયુ લાભ",
                medicalHeader: "તબીબી અને પસંદગીઓ (વિશિષ્ટ વિગતો)",
                labelCondition: "તબીબી સ્થિતિઓ (ડાયાબિટીસ, પીસીઓએસ, થાઇરોઇડ, વગેરે)",
                labelAllergies: "એલર્જી અને અસહિષ્ણુતા",
                labelDislikes: "નાપસંદ / પસંદગીના ખોરાક",
                labelProfilePhoto: "પ્રોફાઇલ ફોટો",
                btnSaveProfile: "પ્રોફાઇલ સાચવો અને મૂલ્યાંકન જનરેટ કરો",
                btnAiSummary: "✨ AI આરોગ્ય સારાંશ મેળવો",
                aiSummaryTitle: "AI આરોગ્ય સારાંશ",
                macroGoalsHeader: "મેક્રોન્યુટ્રિઅન્ટ લક્ષ્યો (ગ્રામ)",
                labelProteinGoal: "પ્રોટીન લક્ષ્ય (ગ્રામ)",
                labelCarbGoal: "કાર્બોહાઇડ્રેટ લક્ષ્ય (ગ્રામ)",
                labelFatGoal: "ચરબીનું લક્ષ્ય (ગ્રામ)",
                assessmentHeader: "તમારો સ્વાસ્થ્ય મૂલ્યાંકન સારાંશ",
                calcBMI: "BMI",
                calcBMIStatus: "BMI સ્થિતિ",
                calcTDEE: "TDEE",
                calcReqCals: "જરૂરી કેલરી",
                calcProtein: "પ્રોટીન લક્ષ્ય",
                calcCarbs: "કાર્બ્સ લક્ષ્ય",
                calcFat: "ફેટ લક્ષ્ય",
                macroHeader: "અંદાજિત મેક્રોન્યુટ્રિઅન્ટ વિતરણ:",
        
                planHeader: "મારો આહાર પ્લાન",
                btnGeneratePlan: "✨ વિગતવાર 3-દિવસીય પ્લાન જનરેટ કરો",
                planInitialPrompt: "કૃપા કરીને સ્થિર પ્લાન જોવા માટે તમારી પ્રોફાઇલ વિગતો સાચવો, અથવા કસ્ટમ ભોજન યોજના માટે AI પ્લાનરનો ઉપયોગ કરવા માટે '✨ વિગતવાર 3-દિવસીય પ્લાન જનરેટ કરો' બટન પર ક્લિક કરો!",
                
                trackerHeader: "તમારા દૈનિક સેવનને ટ્રૅક કરો",
                logHeader: "ભોજન લોગ",
                btnAnalyzeLog: "✨ લોગનું વિશ્લેષણ કરો",
                logAnalysisTitle: "લોગ વિશ્લેષણ:",
                logEmpty: "તમારો દૈનિક ભોજન લોગ અહીં દેખાશે.",
                logInputPlaceholder: "તમારું ભોજન લોગ કરો (દા.ત. લંચ: 1 વાટકી રાજમા, ભાત, સલાડ) અને જથ્થો",
                logBtn: "ભોજન લોગ કરો",
                waterHeader: "પાણીનું સેવન",
                waterGoal: "લક્ષ્ય: 3.5 લિટર",
                btnAddWater: "+ 250મિલી",
                servingsHeader: "ફળ/શાકભાજી સર્વિંગ",
                btnAddServing: "+ સર્વિંગ ઉમેરો",
                reminderHeader: "અનુપાલન રીમાઇન્ડર્સ",
                reminderText: "વધારે સારા અનુપાલન માટે નીચે કસ્ટમ ભોજન અને પાણીના રીમાઇન્ડર્સ સેટ કરો!",
                btnSetReminder: "રીમાઇન્ડર્સ સેટ કરો",
                btnHideReminders: "રીમાઇન્ડર્સ છુપાવો",
                newReminder: "નવું રીમાઇન્ડર",
                reminderTime: "સમય",
                reminderType: "પ્રકાર",
                reminderMeal: "ભોજન",
                reminderWater: "પાણી",
                btnAddReminder: "રીમાઇન્ડર ઉમેરો",
                noRemindersSet: "હજી સુધી કોઈ રીમાઇન્ડર સેટ નથી.",
        
                recipesMainHeader: "વ્યક્તિગત વાનગીઓ અને સામગ્રી એક્સપ્લોરર",
                recipeDiagHeader: "મારી સ્થિતિ માટે વાનગીઓ",
                recipeDiagStatus: "તમારી સાચવેલી તબીબી સ્થિતિ પર આધારિત વિશિષ્ટ વાનગીઓ જનરેટ કરવા માટે નીચે ક્લિક કરો",
                btnGenerateDiag: "સ્થિતિ માટે વાનગીઓ જનરેટ કરો",
                recipeIngrHeader: "નવીન સામગ્રી વાનગીઓ",
                ingrInputPlaceholder: "એક મુખ્ય સામગ્રી દાખલ કરો (દા.ત. પનીર, બાજરી, ભીંડો)",
                btnSuggestRecipes: "3 નવીન વાનગીઓ સૂચવો",
                
                reportsMainHeader: "તબીબી રિપોર્ટ અર્થઘટન",
                reportsAnalyzeHeader: "તમારા રિપોર્ટનું વિશ્લેષણ કરો",
                reportsInstructions: "નીચે તમારા રક્ત પરીક્ષણ અથવા તબીબી રિપોર્ટના નિર્ણાયક તારણો પેસ્ટ કરો (દા.ત. 'HbA1c: 7.5%, વિટામિન D: 12 ng/mL, TSH: 8.0') . અમારી સિસ્ટમ નિદાન સમજાવશે.",
                reportsInputPlaceholder: "તારણો અહીં દાખલ કરો...",
                btnInterpretReport: "રિપોર્ટનો અર્થઘટન કરો અને નિદાન મેળવો",
        
                guidanceMainHeader: "લક્ષિત પોષક માર્ગદર્શન",
                guidanceFindHeader: "પોષક તત્વો અને ખોરાકના સ્ત્રોત શોધો",
                guidanceInstructions: "તબીબી સ્થિતિ, ઉણપ, અથવા મુખ્ય લક્ષણો દાખલ કરો (દા.ત. આયર્નની ઉણપ, ઓછી ઊર્જા, ટાઇપ 2 ડાયાબિટીસ).",
                guidanceInputPlaceholder: "નિદાન, ઉણપ, અથવા લક્ષણો દાખલ કરો (દા.ત. વિટામિન B12 ની ઉણપ)",
                btnNutrientsAvoid: "મુખ્ય પોષક તત્વો / ટાળો",
                btnFoodSources: "ટોચના ખોરાકના સ્ત્રોતો",
                btnInteractions: "દવાઓની ક્રિયાપ્રતિક્રિયા",
                guidanceOutputInitial: "ઉપરના વિકલ્પની પસંદગી કર્યા પછી પરિણામો અહીં દેખાશે.",
        
                // Search
                searchMainHeader: "ગ્રાઉન્ડેડ આરોગ્ય શોધ",
                searchInstructions: "કોઈપણ આરોગ્ય અથવા પોષણ સંબંધિત પ્રશ્ન પૂછો. AI સૌથી અદ્યતન માહિતી પ્રદાન કરવા માટે Google શોધનો ઉપયોગ કરશે.",
                searchInputPlaceholder: "દા.ત., ડાયાબિટીસ માટે તૂટક તૂટક ઉપવાસ પર નવીનતમ સંશોધન",
                btnSearch: "Google વડે શોધો",
                searchResultsTitle: "શોધ પરિણામો",
                sourcesTitle: "સ્ત્રોતો",
                searchInitialPrompt: "તમારા શોધ પરિણામો અહીં દેખાશે.",
                
                // Chat
                chatMainHeader: "AI સહાયક",
                chatWelcome: "નમસ્તે! હું તમારો AI આરોગ્ય સહાયક છું. આજે હું તમારા આહાર, પોષણ, અથવા ફિટનેસ સંબંધિત પ્રશ્નોમાં કેવી રીતે મદદ કરી શકું?",
                chatInputPlaceholder: "પોષણ વિશે કંઈપણ પૂછો...",
                btnClearChat: "ચેટ સાફ કરો",
        
                // Feedback
                feedbackTitle: "પ્રતિસાદ સબમિટ કરો",
                feedbackType: "પ્રતિસાદનો પ્રકાર",
                feedbackTypeBug: "બગ રિપોર્ટ",
                feedbackTypeSuggestion: "સૂચન",
                feedbackTypeGeneral: "સામાન્ય ટિપ્પણી",
                feedbackContent: "તમારો પ્રતિસાદ",
                btnSubmitFeedback: "પ્રતિસાદ સબમિટ કરો",
                feedbackSuccess: "આભાર! તમારો પ્રતિસાદ સાચવવામાં આવ્યો છે.",
            },
        };

        // FROM: components/common/LogoIcon.tsx
        const LogoIcon = ({ className }) => (
            React.createElement('svg', { 
                viewBox: "0 0 24 24", 
                fill: "none", 
                xmlns: "http://www.w3.org/2000/svg",
                className: className
            },
                React.createElement('defs', null,
                    React.createElement('linearGradient', { id: "logoGradient", x1: "0%", y1: "0%", x2: "100%", y2: "100%" },
                        React.createElement('stop', { offset: "0%", style: { stopColor: 'var(--color-primary)' } }),
                        React.createElement('stop', { offset: "100%", style: { stopColor: 'var(--color-secondary)' } })
                    )
                ),
                React.createElement('path', { 
                    fillRule: "evenodd", 
                    clipRule: "evenodd", 
                    d: "M11 20V11H8C7.44772 11 7 10.5523 7 10C7 9.44772 7.44772 9 8 9H16C16.5523 9 17 9.44772 17 10C17 10.5523 16.5523 11 16 11H13V20C13 20.5523 12.5523 21 12 21C11.4477 21 11 20.5523 11 20Z", 
                    fill: "url(#logoGradient)"
                }),
                React.createElement('circle', { cx: "18", cy: "6", r: "3", fill: "url(#logoGradient)" })
            )
        );

        // FROM: components/common/icons.tsx
        const iconProps = {
            className: "w-5 h-5 mr-3",
            strokeWidth: "2",
            fill: "none",
            strokeLinecap: "round",
            strokeLinejoin: "round",
        };
        const HomeIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" }), React.createElement('polyline', { points: "9 22 9 12 15 12 15 22" }));
        const UserIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" }), React.createElement('circle', { cx: "12", cy: "7", r: "4" }));
        const ChefHatIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M19 14v3.129a3 3 0 0 1-1.205 2.454L15 21l-2.83-1.415a3 3 0 0 1-1.04-4.996L12 14" }), React.createElement('path', { d: "M19 14V5a2 2 0 0 0-2-2h-1a2 2 0 0 0-2 2v9" }), React.createElement('path', { d: "M12 14V5a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v9" }), React.createElement('path', { d: "M6 14V5a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v9" }), React.createElement('path', { d: "M3 14v3.129a3 3 0 0 0 1.205 2.454L7 21l2.83-1.415a3 3 0 0 0 1.04-4.996L10 14" }));
        const ActivityIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('polyline', { points: "22 12 18 12 15 21 9 3 6 12 2 12" }));
        const UtensilsIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" }), React.createElement('path', { d: "M7 2v20" }), React.createElement('path', { d: "M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Z" }));
        const FileTextIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" }), React.createElement('path', { d: "M14 2v4a2 2 0 0 0 2 2h4" }), React.createElement('path', { d: "M16 13H8" }), React.createElement('path', { d: "M16 17H8" }), React.createElement('path', { d: "M10 9H8" }));
        const GraduationCapIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.084a1 1 0 0 0 0 1.838l8.57 3.908a2 2 0 0 0 1.66 0z" }), React.createElement('path', { d: "M22 10v6" }), React.createElement('path', { d: "M6 12v5c0 3 2.5 5 5 5s5-2 5-5v-5" }));
        const SearchIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('circle', { cx: "11", cy: "11", r: "8" }), React.createElement('path', { d: "m21 21-4.3-4.3" }));
        const MessageSquareIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" }));
        const BotMessageSquareIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...iconProps}, React.createElement('path', { d: "M12 6V2H8"}), React.createElement('path', { d: "m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"}), React.createElement('path', { d: "M2 12h2"}), React.createElement('path', { d: "M9 12h2"}), React.createElement('path', { d: "M15 12h2"}), React.createElement('path', { d: "M16 6h-4"}), React.createElement('path', { d: "M16 2v4"}));
        const BotMessageSquareIconClean = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-5 h-5 text-gray-600"}, React.createElement('path', { d: "M12 6V2H8"}), React.createElement('path', { d: "m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z"}), React.createElement('path', { d: "M2 12h2"}), React.createElement('path', { d: "M9 12h2"}), React.createElement('path', { d: "M15 12h2"}), React.createElement('path', { d: "M16 6h-4"}), React.createElement('path', { d: "M16 2v4"}));
        const MenuIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6"}, React.createElement('line', { x1: "3", y1: "12", x2: "21", y2: "12" }), React.createElement('line', { x1: "3", y1: "6", x2: "21", y2: "6" }), React.createElement('line', { x1: "3", y1: "18", x2: "21", y2: "18" }));
        const XIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6"}, React.createElement('line', { x1: "18", y1: "6", x2: "6", y2: "18" }), React.createElement('line', { x1: "6", y1: "6", x2: "18", y2: "18" }));
        const CameraIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"}, React.createElement('path', { d: "M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}), React.createElement('circle', { cx: "12", cy: "13", r: "3" }));
        const DefaultAvatarIcon = ({ className }) => React.createElement('div', { className: className }, React.createElement('svg', { viewBox: "0 0 100 100", fill: "none", xmlns: "http://www.w3.org/2000/svg", className: "w-full h-full" }, React.createElement('circle', { cx: "50", cy: "50", r: "50", fill: "#E5E7EB"}), React.createElement('path', { d: "M50 62.5C60.3553 62.5 68.75 54.1053 68.75 43.75C68.75 33.3947 60.3553 25 50 25C39.6447 25 31.25 33.3947 31.25 43.75C31.25 54.1053 39.6447 62.5 50 62.5Z", fill: "#9CA3AF"}), React.createElement('path', { d: "M75 87.5C75 74.0278 63.8071 62.5 50 62.5C36.1929 62.5 25 74.0278 25 87.5H75Z", fill: "#9CA3AF"})));
        const smallIconProps = {
          className: "w-4 h-4 mr-2",
          strokeWidth: "2",
          fill: "none",
          stroke: "currentColor",
          strokeLinecap: "round",
          strokeLinejoin: "round",
        };
        const SparklesIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...smallIconProps}, React.createElement('path', { d: "m12 3-1.9 4.2-4.2 1.9 4.2 1.9L12 21l1.9-4.2 4.2-1.9-4.2-1.9L12 3z" }), React.createElement('path', { d: "M5 3v4" }), React.createElement('path', { d: "M19 17v4" }), React.createElement('path', { d: "M3 5h4" }), React.createElement('path', { d: "M17 19h4" }));
        const LoaderIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...smallIconProps, className: "w-4 h-4 mr-2 animate-spin"}, React.createElement('path', { d: "M21 12a9 9 0 1 1-6.219-8.56" }));
        const BrainCircuitIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", viewBox: "0 0 24 24", ...smallIconProps}, React.createElement('path', { d: "M12 5a3 3 0 1 0-5.993.25" }), React.createElement('path', { d: "M18 13a3 3 0 1 0-3 2.83" }), React.createElement('path', { d: "M6 13a3 3 0 1 0-3 2.83" }), React.createElement('path', { d: "M18.12 8A3 3 0 1 0 15 5.17" }), React.createElement('path', { d: "M12 12a3 3 0 1 0 5.993-.25" }), React.createElement('path', { d: "M14.68 18.32A3 3 0 1 0 12 21.15" }), React.createElement('path', { d: "M6.01 5.25A3 3 0 1 0 9 8" }), React.createElement('path', { d: "m6.25 15.75 2.5-1.5" }), React.createElement('path', { d: "M14.9 15.58 12.4 14" }), React.createElement('path', { d: "m9.25 10-2.5-1.5" }), React.createElement('path', { d: "m12.25 7-2.5-1.5" }), React.createElement('path', { d: "m15.1 10-2.6-1.5" }), React.createElement('path', { d: "m15.1 15.5-2.6 1.5" }), React.createElement('path', { d: "M9.08 18.07A3 3 0 1 0 6 21.15" }));
        const TrashIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"}, React.createElement('path', { d: "M3 6h18" }), React.createElement('path', { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" }), React.createElement('line', { x1: "10", y1: "11", x2: "10", y2: "17" }), React.createElement('line', { x1: "14", y1: "11", x2: "14", y2: "17" }));

        // FROM: components/common/StatCard.tsx
        const StatCard = ({ title, value, subtitle, icon, borderColor }) => {
            return (
                React.createElement('div', { className: `bg-[var(--color-card)] p-6 rounded-2xl shadow-xl border-t-4`, style: { borderColor } },
                    React.createElement('div', { className: "flex items-center justify-between" },
                        React.createElement('span', { className: "text-sm font-medium text-[var(--color-text-secondary)]" }, title),
                        icon
                    ),
                    React.createElement('p', { className: "text-3xl font-bold mt-2 text-[var(--color-text-primary)]" }, value),
                    React.createElement('p', { className: "text-xs text-[var(--color-text-secondary)]" }, subtitle)
                )
            );
        };

        // FROM: components/common/Spinner.tsx
        const Spinner = ({ size = 'md' }) => {
            const sizeClasses = {
                sm: 'w-5 h-5',
                md: 'w-8 h-8',
                lg: 'w-12 h-12',
            };
            return (
                React.createElement('div', { className: `animate-spin rounded-full border-4 border-t-transparent border-[var(--color-primary)] ${sizeClasses[size]}`, role: "status" },
                    React.createElement('span', { className: "sr-only" }, "Loading...")
                )
            );
        };
        
        // FROM: services/geminiService.ts
        const FLASH_MODEL = 'gemini-2.5-flash';
        const PRO_MODEL = 'gemini-3-pro-preview';
        let ai = null;
        const getAi = () => {
            if (!ai) {
                // User-provided API key for browser-based communication with the AI
                const API_KEY = "AIzaSyA6UiZ0n-EEpIWjJV7SVLrzEwzmSzc4Lno";
                
                if (!API_KEY) {
                  console.warn("API_KEY is not set. Gemini API calls will fail.");
                }
                ai = new GoogleGenAI({ apiKey: API_KEY });
            }
            return ai;
        };
        const callGemini = async (prompt, systemInstruction, model = FLASH_MODEL) => {
            try {
                const response = await getAi().models.generateContent({
                    model,
                    contents: [{ parts: [{ text: prompt }] }],
                    config: {
                        systemInstruction,
                    },
                });
                return response.text ?? "Error: Could not get a valid response from the AI.";
            } catch (error) {
                console.error("Gemini API Error:", error);
                return `Error: Failed to communicate with the AI service. Details: ${error instanceof Error ? error.message : String(error)}`;
            }
        };
        const generateHealthSummary = async (assessment) => {
            const { bmi, tdee, target, bmiStatus } = assessment;
            const summaryPrompt = `
                Based on the following health assessment, provide a concise, 2-3 sentence summary in an encouraging and informative tone.
                - BMI: ${bmi} (${bmiStatus})
                - TDEE (Total Daily Energy Expenditure): ${tdee} kcal
                - Target Daily Calories for goal: ${target} kcal

                Briefly explain what these numbers mean in simple terms and offer one actionable, general piece of advice based on the BMI status and goals implied by the target calories. Avoid specific medical advice.
            `;
            const systemInstruction = "You are an AI health assistant. Your tone is supportive and motivational. You provide simple explanations of health metrics and general wellness tips.";
            return callGemini(summaryPrompt, systemInstruction);
        };
        const generateDetailedPlan = async (profile) => {
            const { assessment, goal, dietaryPreference, medicalConditions, allergies, likesDislikes } = profile;
            const { target } = assessment;
            const userDetails = `
                Goal: ${goal}.
                Target Daily Calories: ${target} kcal.
                Dietary Preference: ${dietaryPreference}.
                Medical Conditions: ${medicalConditions || 'None'}.
                Allergies/Intolerances: ${allergies || 'None'}.
                Food Likes/Dislikes: ${likesDislikes || 'None'}.
            `;
            const planPrompt = `
                As a specialized Indian dietitian, create a detailed, balanced, and complete 3-Day Meal Plan (Day 1, Day 2, Day 3).
                The plan MUST be tailored to the following user profile:
                ${userDetails}

                Constraints:
                1. All meals must strictly adhere to Indian cuisine (focus on homemade, simple dishes).
                2. Total calories for each day must average very close to the target of ${target} kcal/day.
                3. The plan must include 5 eating slots: Early Morning, Breakfast, Mid-Morning Snack, Lunch, Evening Snack, Dinner.
                4. Absolutely avoid all ingredients listed in the Allergies/Intolerances section.
                5. Provide a short health/cooking note for each meal, including an approximate calorie count for that meal.
                6. Structure the output clearly using Markdown headings for days and lists for meals. Do not use markdown tables.
            `;
            const systemInstruction = "You are an expert Indian dietitian. Generate the meal plan strictly following all constraints. Your response should be pure markdown text.";
            return callGemini(planPrompt, systemInstruction);
        };
        const analyzeMealLog = async (logEntries, profile) => {
            const logSummary = logEntries.map(e => `${e.text} (~${e.kcal} kcal)`).join('; ');
            const targetCalories = profile.assessment?.target || 2000;
            const goal = profile.goal || 'Maintenance';
            const logPrompt = `
                Analyze the following meal log against the user's goal of **${goal}** and **${targetCalories} kcal** target.
                Meal Log (Today): ${logSummary}
                
                Provide a concise, 3-point analysis in a friendly, encouraging tone:
                1. A brief summary of compliance (e.g., "Good protein intake, slightly high calories").
                2. One specific suggestion for improvement/a healthier swap based on the log.
                3. A final encouraging sentence.
            `;
            const systemInstruction = "You are a friendly, encouraging AI nutrition coach. Provide a concise, 3-point analysis of the user's meal log, using only text, no Markdown list formatting.";
            return callGemini(logPrompt, systemInstruction);
        };
        const generateRecipesByCondition = async (condition) => {
            const prompt = `
                As an expert dietitian, generate 3 unique, simple Indian recipes specifically tailored for a person with the medical condition: **${condition}**.
                For each recipe:
                1. Provide the Recipe Name as a main heading (e.g., ### Recipe Name).
                2. Create a subheading named "## Ingredients". Below it, list all ingredients as a bulleted list (e.g., "* 1 cup Flour").
                3. Create a subheading named "## Method". Below it, list the step-by-step cooking instructions as a numbered list.
                4. Create a subheading named "## Health Note". Below it, briefly explain *why* this recipe is suitable for the specified condition.
            `;
            const systemInstruction = "You are a specialized Indian dietitian. Generate the recipe response strictly following the requested structured Markdown format.";
            return callGemini(prompt, systemInstruction);
        };
        const generateRecipesByIngredient = async (ingredient) => {
            const prompt = `
                Generate 3 unique, innovative, healthy Indian recipe ideas focusing on **${ingredient}** as the main ingredient.
                For each recipe:
                1. Provide the Recipe Name as a main heading (e.g., ### Creative Recipe Name).
                2. Create a subheading named "## Ingredients". Below it, list all ingredients as a bulleted list (e.g., "* 1 cup Flour").
                3. Create a subheading named "## Method". Below it, list the step-by-step cooking instructions as a numbered list.
                4. Create a subheading named "## Chef's Note". Below it, briefly describe the innovative approach.
            `;
            const systemInstruction = "You are a creative Indian chef. Generate the recipe response strictly following the requested structured Markdown format.";
            return callGemini(prompt, systemInstruction);
        };
        const analyzeMedicalReport = async (reportInput) => {
            const prompt = `
                Interpret the following medical findings:
                FINDINGS: ${reportInput}

                Provide the analysis in this format:
                ### Diagnosis/Explanation
                What do these values usually indicate? (Be general and non-definitive).
                ### Dietary Implication
                What immediate nutritional changes are suggested?
                ### Disclaimer
                (Always include: "This is for informational purposes only and is not a substitute for professional medical advice. Always consult a qualified physician.")
            `;
            const systemInstruction = "You are an AI Medical Assistant. Your response MUST be structured into the three requested sections. Be cautious, non-alarmist, and recommend consulting a doctor.";
            return callGemini(prompt, systemInstruction, PRO_MODEL);
        };
        const getNutritionalGuidance = async (input, type) => {
            let prompt = `Based on the user input (diagnosis/symptoms: ${input}), provide the following information:\n`;
            if (type === 'nutrients_and_avoid') {
                prompt += `
                ### Key Nutrients to Focus On
                List the 5-7 most critical nutrients (Vitamins, Minerals, etc.) and explain their importance for this condition.
                ### Foods to Avoid
                List the 5-7 most important foods/categories to avoid or limit.
                `;
            } else if (type === 'food_sources') {
                prompt += `### Top Indian Food Sources
                Generate a list of the 7-10 most beneficial Indian food sources (e.g., specific dals, millets, vegetables) that provide the required nutrients. Include a brief preparation/consumption tip for each.
                `;
            } else { // interactions
                prompt += `### Food & Drug Interactions
                Provide information on the most common and critical food and drug interactions relevant to the treatment of this condition. List 3-5 specific medication types and the corresponding foods/nutrients that interact with them. If no common interaction exists, state that clearly. Include a strong disclaimer to consult a doctor.
                `;
            }
            const systemInstruction = "You are an expert nutritionist. Provide concise, detailed, and structured information tailored to the user's request. Focus on an Indian/South Asian context.";
            return callGemini(prompt, systemInstruction);
        };
        const performGroundedSearch = async (query) => {
            try {
                const response = await getAi().models.generateContent({
                    model: FLASH_MODEL,
                    contents: [{ parts: [{ text: query }] }],
                    config: {
                        tools: [{ googleSearch: {} }],
                    },
                });
                const text = response.text ?? "No text response received.";
                const groundingChunks = (response.candidates?.[0]?.groundingMetadata?.groundingChunks) || [];
                const sources = groundingChunks.filter(chunk => chunk.web);
                return { text, sources };
            } catch (error) {
                console.error("Gemini Grounded Search API Error:", error);
                const errorMessage = `Error: Failed to perform grounded search. Details: ${error instanceof Error ? error.message : String(error)}`;
                return { text: errorMessage, sources: [] };
            }
        };
        const startChat = (history) => {
            const chat = getAi().chats.create({
                model: FLASH_MODEL,
                history: history.map(m => ({
                    role: m.role,
                    parts: [{ text: m.text }],
                })),
                config: {
                    systemInstruction: "You are a helpful and friendly AI assistant for the Track and Treat application. Provide concise and supportive answers related to health, nutrition, and fitness."
                }
            });
            return chat;
        };
        const sendMessageToChat = async (chat, message) => {
            try {
                const response = await chat.sendMessage({ message });
                return response.text ?? "Sorry, I couldn't get a response. Please try again.";
            } catch (error) {
                console.error("Gemini Chat API Error:", error);
                return `Error: Failed to communicate with the AI service. Details: ${error instanceof Error ? error.message : String(error)}`;
            }
        };

        // FROM: contexts/AppContext.tsx
        const { createContext, useState, useContext, useEffect, useRef } = React;
        const PROFILE_STORAGE_KEY = 'trackandtreat-profile';
        const initialProfile = {
            name: '',
            age: null,
            gender: 'Male',
            weight: null,
            height: null,
            activity: 'Sedentary',
            dietaryPreference: 'Veg',
            goal: 'Maintenance',
            medicalConditions: '',
            allergies: '',
            likesDislikes: '',
            photoUrl: null,
            assessment: {
                bmi: null,
                tdee: null,
                target: null,
                bmiStatus: '',
            },
            proteinGoal: null,
            carbGoal: null,
            fatGoal: null,
        };
        const initialTracking = {
            waterIntake: 0,
            fruitVegServings: 0,
            mealLog: [],
        };
        const AppContext = createContext(undefined);
        const AppProvider = ({ children }) => {
            const [profile, setProfile] = useState(() => {
                try {
                    const storedProfile = localStorage.getItem(PROFILE_STORAGE_KEY);
                    if (storedProfile) {
                        const parsed = JSON.parse(storedProfile);
                        if (parsed && typeof parsed === 'object' && 'name' in parsed) {
                            return parsed;
                        }
                    }
                } catch (error) {
                    console.error("Failed to load profile from localStorage", error);
                }
                return initialProfile;
            });
            const [tracking, setTracking] = useState(initialTracking);
            const [language, setLanguageState] = useState('en');
            useEffect(() => {
                try {
                    localStorage.setItem(PROFILE_STORAGE_KEY, JSON.stringify(profile));
                } catch (error) {
                    console.error("Failed to save profile to localStorage", error);
                }
            }, [profile]);
            const setLanguage = (lang) => {
                setLanguageState(lang);
                document.documentElement.lang = lang;
            };
            const strings = appStrings[language] || appStrings.en;
            const calculateAssessment = (profileData) => {
                const W = profileData.weight;
                const H = profileData.height;
                const A = profileData.age;
                const G = profileData.gender;
                const Act = profileData.activity;
                const Goal = profileData.goal;
                if (!W || !H || !A) return { bmi: null, tdee: null, target: null, bmiStatus: strings.dashBMICalc };
                const heightInMeters = H / 100;
                const bmi = parseFloat((W / (heightInMeters * heightInMeters)).toFixed(1));
                let bmr;
                if (G === 'Male') {
                    bmr = 88.362 + (13.397 * W) + (4.799 * H) - (5.677 * A);
                } else {
                    bmr = 447.593 + (9.247 * W) + (3.098 * H) - (4.330 * A);
                }
                const activityFactors = {
                    Sedentary: 1.2, Light: 1.375, Moderate: 1.55, High: 1.725, Extreme: 1.9
                };
                const tdee = Math.round(bmr * (activityFactors[Act] || 1.2));
                let targetCalories = tdee;
                if (Goal === 'Weight Loss') targetCalories = tdee - 500;
                else if (Goal === 'Weight Gain') targetCalories = tdee + 500;
                else if (Goal === 'Muscle Gain') targetCalories = tdee + 300;
                let bmiStatus;
                if (bmi < 18.5) bmiStatus = 'Underweight';
                else if (bmi >= 18.5 && bmi < 23) bmiStatus = 'Healthy Weight';
                else if (bmi >= 23 && bmi < 25) bmiStatus = 'Overweight Risk';
                else bmiStatus = 'Obese';
                return { bmi, tdee, target: targetCalories, bmiStatus };
            }
            const value = {
                profile,
                setProfile,
                tracking,
                setTracking,
                language,
                setLanguage,
                strings,
                calculateAssessment,
            };
            return React.createElement(AppContext.Provider, { value: value }, children);
        };
        const useAppContext = () => {
            const context = useContext(AppContext);
            if (context === undefined) {
                throw new Error('useAppContext must be used within an AppProvider');
            }
            return context;
        };

        // FROM: components/FeedbackModal.tsx
        const FeedbackModal = ({ isOpen, onClose }) => {
            const { strings } = useAppContext();
            const [type, setType] = useState('Suggestion');
            const [content, setContent] = useState('');
            const [isSubmitted, setIsSubmitted] = useState(false);
            const FEEDBACK_STORAGE_KEY = 'trackandtreat-feedback';
            useEffect(() => {
                if (isOpen) {
                    setContent('');
                    setType('Suggestion');
                    setIsSubmitted(false);
                }
            }, [isOpen]);
            if (!isOpen) {
                return null;
            }
            const handleSubmit = (e) => {
                e.preventDefault();
                if (!content.trim()) return;
                const newFeedback = {
                    id: new Date().toISOString(),
                    type,
                    content,
                    timestamp: new Date().toLocaleString()
                };
                try {
                    const existingFeedback = JSON.parse(localStorage.getItem(FEEDBACK_STORAGE_KEY) || '[]');
                    existingFeedback.push(newFeedback);
                    localStorage.setItem(FEEDBACK_STORAGE_KEY, JSON.stringify(existingFeedback));
                    setIsSubmitted(true);
                    setTimeout(() => {
                        onClose();
                    }, 2000);
                } catch (error) {
                    console.error("Failed to save feedback to localStorage", error);
                }
            };
            return React.createElement('div', { className: "fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4", onClick: onClose },
                React.createElement('div', { className: "bg-[var(--color-card)] rounded-2xl shadow-xl w-full max-w-md p-6 relative", onClick: (e) => e.stopPropagation() },
                    React.createElement('button', { onClick: onClose, className: "absolute top-4 right-4 text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)]" },
                        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"}, React.createElement('line', { x1: "18", y1: "6", x2: "6", y2: "18" }), React.createElement('line', { x1: "6", y1: "6", x2: "18", y2: "18" }))
                    ),
                    React.createElement('h3', { className: "text-xl font-bold text-[var(--color-text-primary)] mb-4" }, strings.feedbackTitle),
                    isSubmitted ? (
                        React.createElement('div', { className: "text-center py-8" },
                            React.createElement('p', { className: "text-lg font-semibold text-green-600" }, strings.feedbackSuccess)
                        )
                    ) : (
                        React.createElement('form', { onSubmit: handleSubmit, className: "space-y-4" },
                            React.createElement('div', null,
                                React.createElement('label', { htmlFor: "feedback-type", className: "block text-sm font-medium text-[var(--color-text-secondary)] mb-1" }, strings.feedbackType),
                                React.createElement('select', { id: "feedback-type", value: type, onChange: (e) => setType(e.target.value), className: "w-full p-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-card)]" },
                                    React.createElement('option', { value: "Suggestion" }, strings.feedbackTypeSuggestion),
                                    React.createElement('option', { value: "Bug Report" }, strings.feedbackTypeBug),
                                    React.createElement('option', { value: "General" }, strings.feedbackTypeGeneral)
                                )
                            ),
                            React.createElement('div', null,
                                React.createElement('label', { htmlFor: "feedback-content", className: "block text-sm font-medium text-[var(--color-text-secondary)] mb-1" }, strings.feedbackContent),
                                React.createElement('textarea', { id: "feedback-content", value: content, onChange: (e) => setContent(e.target.value), rows: 5, required: true, placeholder: "...", className: "w-full p-2 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-primary)] bg-transparent focus:ring-1 focus:ring-[var(--color-primary)]" })
                            ),
                            React.createElement('button', { type: "submit", className: "w-full py-2 bg-[var(--color-primary)] text-white font-semibold rounded-xl hover:bg-[var(--color-primary-hover)] transition-all duration-300" }, strings.btnSubmitFeedback)
                        )
                    )
                )
            );
        };
        
        // FROM: components/RemindersCard.tsx
        const RemindersCard = ({ reminders, onAddReminder, onDeleteReminder }) => {
            const { strings } = useAppContext();
            const [time, setTime] = useState('09:00');
            const [type, setType] = useState('Meal');
            const handleAddClick = () => {
                if (time) {
                    onAddReminder(time, type);
                    setTime('09:00');
                    setType('Meal');
                }
            };
            return React.createElement('div', { className: "p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl" },
                React.createElement('h4', { className: "text-md font-bold text-amber-900 dark:text-amber-200 mb-3" }, strings.newReminder),
                React.createElement('div', { className: "flex items-center gap-2 mb-3" },
                    React.createElement('div', { className: "flex-1" },
                        React.createElement('label', { htmlFor: "reminder-time", className: "text-xs text-amber-800 dark:text-amber-300" }, strings.reminderTime),
                        React.createElement('input', { id: "reminder-time", type: "time", value: time, onChange: (e) => setTime(e.target.value), className: "w-full p-1 border border-amber-300 dark:border-amber-700 rounded-md bg-transparent" })
                    ),
                    React.createElement('div', { className: "flex-1" },
                        React.createElement('label', { htmlFor: "reminder-type", className: "text-xs text-amber-800 dark:text-amber-300" }, strings.reminderType),
                        React.createElement('select', { id: "reminder-type", value: type, onChange: (e) => setType(e.target.value), className: "w-full p-1 border border-amber-300 dark:border-amber-700 rounded-md bg-[var(--color-card)]" },
                            React.createElement('option', { value: "Meal" }, strings.reminderMeal),
                            React.createElement('option', { value: "Water" }, strings.reminderWater)
                        )
                    )
                ),
                React.createElement('button', { onClick: handleAddClick, className: "w-full py-1 text-sm bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors" }, strings.btnAddReminder),
                React.createElement('div', { className: "mt-4 pt-3 border-t border-amber-200 dark:border-amber-800" },
                    reminders.length > 0 ? (
                        React.createElement('ul', { className: "space-y-2" },
                            reminders.map(reminder => (
                                React.createElement('li', { key: reminder.id, className: "flex justify-between items-center text-sm p-2 bg-amber-100 dark:bg-amber-900/30 rounded-md" },
                                    React.createElement('span', { className: "font-semibold text-amber-900 dark:text-amber-200" }, `${reminder.time} - ${reminder.type === 'Meal' ? strings.reminderMeal : strings.reminderWater}`),
                                    React.createElement('button', { onClick: () => onDeleteReminder(reminder.id), className: "text-red-500 hover:text-red-700" },
                                        React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "16", height: "16", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('path', { d: "M6 18 18 6M6 6l12 12" }))
                                    )
                                )
                            ))
                        )
                    ) : (
                        React.createElement('p', { className: "text-xs text-center text-amber-700 dark:text-amber-400" }, strings.noRemindersSet)
                    )
                )
            );
        };
        
        // FROM: components/Sidebar.tsx
        const Sidebar = ({ activeView, setActiveView, isMobileOpen, setMobileOpen }) => {
            const { profile, language, setLanguage, strings } = useAppContext();
            const [isFeedbackModalOpen, setIsFeedbackModalOpen] = useState(false);
            const navItems = [
                { id: 'dashboard', labelKey: 'navDashboard', icon: React.createElement(HomeIcon) },
                { id: 'profile', labelKey: 'navProfile', icon: React.createElement(UserIcon) },
                { id: 'plan', labelKey: 'navPlan', icon: React.createElement(ChefHatIcon) },
                { id: 'tracker', labelKey: 'navTracking', icon: React.createElement(ActivityIcon) },
                { id: 'recipes', labelKey: 'navRecipes', icon: React.createElement(UtensilsIcon) },
                { id: 'reports', labelKey: 'navReports', icon: React.createElement(FileTextIcon) },
                { id: 'guidance', labelKey: 'navGuidance', icon: React.createElement(GraduationCapIcon) },
                { id: 'search', labelKey: 'navSearch', icon: React.createElement(SearchIcon) },
                { id: 'chat', labelKey: 'navChat', icon: React.createElement(BotMessageSquareIcon) },
            ];
            const handleLanguageChange = (e) => {
                setLanguage(e.target.value);
            };
            const handleNavItemClick = (view) => {
                setActiveView(view);
                setMobileOpen(false);
            };
            const handleFeedbackClick = () => {
                setIsFeedbackModalOpen(true);
                setMobileOpen(false);
            };
            return React.createElement(React.Fragment, null,
                React.createElement('div', { className: `fixed inset-0 bg-black bg-opacity-50 z-30 transition-opacity duration-300 md:hidden ${isMobileOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}`, onClick: () => setMobileOpen(false) }),
                React.createElement('nav', { className: `bg-[var(--color-card)] p-4 shadow-2xl flex flex-col space-y-2 custom-scroll overflow-y-auto w-64 transition-transform duration-300 ease-in-out fixed inset-y-0 left-0 z-40 md:relative md:translate-x-0 md:h-screen md:sticky ${isMobileOpen ? 'translate-x-0' : '-translate-x-full'}` },
                    React.createElement('div', { className: "md:hidden flex items-center justify-between pb-2 border-b border-[var(--color-border)]" },
                        React.createElement('div', { className: "flex items-center gap-2" },
                            React.createElement(LogoIcon, { className: "w-8 h-8" }),
                            React.createElement('span', { className: "text-2xl font-black text-[var(--color-primary)] text-shadow-custom" }, "Track", React.createElement('span', { className: "text-[var(--color-secondary)]" }, " & Treat"))
                        ),
                        React.createElement('button', { onClick: () => setMobileOpen(false), className: "text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] p-1" }, React.createElement(XIcon))
                    ),
                    React.createElement('div', { className: "hidden md:flex items-center gap-2 mb-2" },
                        React.createElement(LogoIcon, { className: "w-9 h-9" }),
                        React.createElement('span', { className: "text-2xl font-black text-[var(--color-primary)] text-shadow-custom" }, "Track", React.createElement('span', { className: "text-[var(--color-secondary)]" }, " & Treat"))
                    ),
                    React.createElement('div', { className: "flex items-center gap-3 p-2 rounded-lg bg-[var(--color-background)] border border-[var(--color-border)]" },
                        profile.photoUrl ? React.createElement('img', { src: profile.photoUrl, alt: "User", className: "w-12 h-12 rounded-full object-cover" }) : React.createElement(DefaultAvatarIcon, { className: "w-12 h-12 rounded-full" }),
                        React.createElement('div', null, React.createElement('p', { className: "font-bold text-[var(--color-text-primary)] break-all" }, profile.name || 'Welcome!'))
                    ),
                    React.createElement('div', { className: "flex-1 space-y-1" },
                        navItems.map(item => (
                            React.createElement('a', { key: item.id, href: "#", onClick: (e) => { e.preventDefault(); handleNavItemClick(item.id); }, className: `flex items-center p-3 rounded-lg font-semibold transition-all duration-200 ${activeView === item.id ? 'bg-[var(--color-primary)] text-white shadow-md' : 'text-[var(--color-text-secondary)] hover:bg-[var(--color-background)] hover:text-[var(--color-text-primary)]'}` },
                                item.icon,
                                strings[item.labelKey]
                            )
                        ))
                    ),
                    React.createElement('div', { className: "mt-auto pt-4 border-t border-[var(--color-border)] space-y-4" },
                        React.createElement('button', { onClick: handleFeedbackClick, className: "w-full flex items-center p-3 rounded-lg font-semibold text-[var(--color-text-secondary)] hover:bg-[var(--color-background)] hover:text-[var(--color-text-primary)] transition-all duration-200" },
                            React.createElement(MessageSquareIcon),
                            strings.navFeedback
                        ),
                        React.createElement('div', { className: "flex flex-col" },
                            React.createElement('label', { htmlFor: "language-select", className: "text-xs text-[var(--color-text-secondary)] mb-1" }, strings.languageLabel),
                            React.createElement('select', { id: "language-select", value: language, onChange: handleLanguageChange, className: "w-full p-2 border border-[var(--color-border)] rounded-lg bg-[var(--color-card)] focus:ring-1 focus:ring-[var(--color-primary)] focus:border-[var(--color-primary)]" },
                                React.createElement('option', { value: "en" }, "English"),
                                React.createElement('option', { value: "hi" }, "हिन्दी (Hindi)"),
                                React.createElement('option', { value: "gu" }, "ગુજરાતી (Gujarati)")
                            )
                        )
                    )
                ),
                React.createElement(FeedbackModal, { isOpen: isFeedbackModalOpen, onClose: () => setIsFeedbackModalOpen(false) })
            );
        };
        
        // FROM: views/DashboardView.tsx
        const ScaleIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6 text-[var(--color-primary)]"}, React.createElement('path', { d: "m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"}), React.createElement('path', { d: "m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"}), React.createElement('path', { d: "M7 21h10"}), React.createElement('path', { d: "M12 3v18"}), React.createElement('path', { d: "M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"}));
        const ZapIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6 text-[var(--color-secondary)]"}, React.createElement('polygon', { points: "13 2 3 14 12 14 11 22 21 10 12 10 13 2"}));
        const DropletIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6 text-[var(--color-accent)]"}, React.createElement('path', { d: "M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"}));
        const AwardIcon = () => React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", className: "w-6 h-6 text-pink-500 dark:text-pink-400"}, React.createElement('circle', { cx: "12", cy: "8", r: "6"}), React.createElement('path', { d: "M15.477 12.89 17 22l-5-3-5 3 1.523-9.11"}));
        const DashboardView = () => {
            const { profile, tracking, strings } = useAppContext();
            const { assessment } = profile;
            const getDailyTip = () => {
                const { goal, medicalConditions, assessment } = profile;
                if (!assessment || !assessment.bmi) return strings.dashTipInitial;
                if (medicalConditions?.toLowerCase().includes('diabetes')) {
                    return 'For **Diabetes**, focus on complex carbs like millets and ensure every meal includes protein and fiber to stabilize blood glucose.';
                }
                if (medicalConditions?.toLowerCase().includes('pcos')) {
                    return 'For **PCOS**, prioritize a high-protein breakfast and healthy fats (nuts, seeds) to improve insulin sensitivity.';
                }
                if (goal === 'Weight Loss') {
                    return 'For **Weight Loss**, drink 1-2 glasses of water before meals to aid satiety and prioritize green vegetables.';
                }
                if (assessment.bmi < 18.5) {
                    return 'You are **Underweight**. Focus on calorie-dense, nutrient-rich foods like nuts, seeds, and healthy oils in every meal.';
                }
                return 'For **Health Maintenance**, aim for 30 minutes of moderate activity today and include at least one seasonal fruit.';
            };
            const generateHypotheticalWeightData = (startWeight) => {
                const data = [];
                const today = new Date();
                for (let i = 6; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(today.getDate() - i);
                    const weight = startWeight - (6 - i) * 0.15 + (Math.random() - 0.5) * 0.2;
                    data.push({
                        date: date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }),
                        weight: parseFloat(weight.toFixed(1)),
                    });
                }
                return data;
            };
            const weightData = generateHypotheticalWeightData(profile.weight || 75);
            return (
                React.createElement('section', { className: "space-y-6" },
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.dashSnapshotHeader),
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" },
                        React.createElement(StatCard, { title: strings.dashBMI, value: assessment?.bmi?.toString() || '--', subtitle: assessment?.bmi ? `${assessment.bmiStatus}` : strings.dashBMICalc, icon: React.createElement(ScaleIcon), borderColor: "var(--color-primary)" }),
                        React.createElement(StatCard, { title: strings.dashTarget, value: assessment?.target ? `${assessment.target} kcal` : '-- kcal', subtitle: strings.dashBaseGoal, icon: React.createElement(ZapIcon), borderColor: "var(--color-secondary)" }),
                        React.createElement(StatCard, { title: strings.dashWater, value: `${(tracking.waterIntake / 1000).toFixed(1)} L`, subtitle: strings.dashWaterGoal, icon: React.createElement(DropletIcon), borderColor: "var(--color-accent)" }),
                        React.createElement(StatCard, { title: strings.dashStreak, value: "0 Days", subtitle: strings.dashKeepUp, icon: React.createElement(AwardIcon), borderColor: "#ec4899" })
                    ),
                    React.createElement('div', { className: "bg-teal-50 dark:bg-teal-900/20 p-6 rounded-2xl border border-teal-200 dark:border-teal-800" },
                        React.createElement('h3', { className: "text-xl font-bold text-[var(--color-primary)] mb-3" }, strings.dashTipHeader),
                        React.createElement('p', { className: "text-[var(--color-text-primary)]", dangerouslySetInnerHTML: { __html: getDailyTip().replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') } })
                    ),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                        React.createElement('h3', { className: "text-xl font-bold text-[var(--color-text-primary)] mb-3" }, strings.dashProgressHeader),
                        React.createElement('div', { className: "h-64 w-full" },
                           React.createElement(ResponsiveContainer, { width: "100%", height: "100%" },
                                React.createElement(LineChart, { data: weightData, margin: { top: 5, right: 20, left: -10, bottom: 5 } },
                                    React.createElement(CartesianGrid, { strokeDasharray: "3 3", stroke: "var(--color-border)" }),
                                    React.createElement(XAxis, { dataKey: "date", stroke: "var(--color-text-secondary)", fontSize: 12 }),
                                    React.createElement(YAxis, { stroke: "var(--color-text-secondary)", fontSize: 12, domain: ['dataMin - 1', 'dataMax + 1'], label: { value: 'Weight (kg)', angle: -90, position: 'insideLeft', fill: 'var(--color-text-secondary)', dx: -10 } }),
                                    React.createElement(Tooltip, { contentStyle: { backgroundColor: 'var(--color-card)', border: '1px solid var(--color-border)', borderRadius: '8px', boxShadow: '0 2px 10px rgba(0,0,0,0.1)' }, labelStyle: { fontWeight: 'bold', color: 'var(--color-primary)' } }),
                                    React.createElement(Line, { type: "monotone", dataKey: "weight", stroke: "var(--color-primary)", strokeWidth: 3, activeDot: { r: 8, fill: 'var(--color-primary)' }, dot: { stroke: 'var(--color-primary)', strokeWidth: 2, r: 4, fill: 'var(--color-card)' } })
                                )
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/ProfileView.tsx
        const ProfileView = () => {
            const { profile, setProfile, strings, calculateAssessment } = useAppContext();
            const [formData, setFormData] = useState(profile);
            const [statusMessage, setStatusMessage] = useState('');
            const [isSummaryLoading, setIsSummaryLoading] = useState(false);
            const [aiSummary, setAiSummary] = useState('');
            const fileInputRef = useRef(null);
            useEffect(() => {
                setFormData(profile);
            }, [profile]);
            const handleChange = (e) => {
                const { id, value } = e.target;
                const isNumberField = ['age', 'weight', 'height', 'proteinGoal', 'carbGoal', 'fatGoal'].includes(id);
                const processedValue = isNumberField ? (value === '' ? null : parseFloat(value)) : value;
                setFormData(prev => ({ ...prev, [id]: processedValue }));
            };
            const handlePhotoChange = (e) => {
                if (e.target.files && e.target.files[0]) {
                    const file = e.target.files[0];
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setFormData(prev => ({ ...prev, photoUrl: reader.result }));
                    };
                    reader.readAsDataURL(file);
                }
            };
            const handleSubmit = (e) => {
                e.preventDefault();
                const assessment = calculateAssessment(formData);
                const updatedProfile = { ...formData, assessment };
                setProfile(updatedProfile);
                setStatusMessage('Profile saved successfully! Assessment updated.');
                setAiSummary('');
            };
            const handleGetAiSummary = async () => {
                if (!profile.assessment?.bmi) return;
                setIsSummaryLoading(true);
                setAiSummary('');
                const summary = await generateHealthSummary(profile.assessment);
                setAiSummary(summary);
                setIsSummaryLoading(false);
            };
            const { assessment, proteinGoal, carbGoal, fatGoal } = profile;
            const isAssessmentDone = !!assessment?.bmi;
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.profileHeader),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                        React.createElement('form', { onSubmit: handleSubmit, className: "grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4" },
                            React.createElement('div', { className: "md:col-span-2 flex flex-col items-center gap-4 py-4 border-b border-[var(--color-border)]" },
                                 React.createElement('div', { className: "relative w-32 h-32" },
                                    formData.photoUrl ? React.createElement('img', { src: formData.photoUrl, alt: "Profile", className: "w-full h-full rounded-full object-cover border-4 border-gray-200 dark:border-slate-700" }) : React.createElement(DefaultAvatarIcon, { className: "w-full h-full rounded-full border-4 border-gray-200 dark:border-slate-700" }),
                                    React.createElement('button', { type: "button", onClick: () => fileInputRef.current?.click(), className: "absolute bottom-1 right-1 bg-[var(--color-primary)] text-white p-2 rounded-full hover:bg-[var(--color-primary-hover)] transition-all shadow-md", "aria-label": "Upload photo" },
                                        React.createElement(CameraIcon)
                                    )
                                ),
                                React.createElement('input', { type: "file", ref: fileInputRef, onChange: handlePhotoChange, className: "hidden", accept: "image/png, image/jpeg, image/webp" })
                            ),
                            React.createElement('div', { className: "md:col-span-2" }, React.createElement('h3', { className: "text-lg font-semibold text-[var(--color-primary)] mb-2 border-b border-[var(--color-border)] pb-1" }, strings.metricHeader)),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "name", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelName), React.createElement('input', { type: "text", id: "name", value: formData.name, onChange: handleChange, required: true, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "age", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelAge), React.createElement('input', { type: "number", id: "age", value: formData.age ?? '', onChange: handleChange, required: true, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "gender", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelGender), React.createElement('select', { id: "gender", value: formData.gender, onChange: handleChange, className: "mt-1 block w-full rounded-md border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] bg-[var(--color-card)]" }, React.createElement('option', { value: "Male" }, strings.genderMale), React.createElement('option', { value: "Female" }, strings.genderFemale), React.createElement('option', { value: "Other" }, strings.genderOther))),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "weight", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelWeight), React.createElement('input', { type: "number", step: "0.1", id: "weight", value: formData.weight ?? '', onChange: handleChange, required: true, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "height", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelHeight), React.createElement('input', { type: "number", step: "1", id: "height", value: formData.height ?? '', onChange: handleChange, required: true, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "activity", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelActivity), React.createElement('select', { id: "activity", value: formData.activity, onChange: handleChange, className: "mt-1 block w-full rounded-md border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] bg-[var(--color-card)]" },
                                React.createElement('option', { value: "Sedentary" }, strings.activitySedentary), React.createElement('option', { value: "Light" }, strings.activityLight), React.createElement('option', { value: "Moderate" }, strings.activityModerate), React.createElement('option', { value: "High" }, strings.activityHigh), React.createElement('option', { value: "Extreme" }, strings.activityExtreme)
                            )),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "dietaryPreference", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelDiet), React.createElement('select', { id: "dietaryPreference", value: formData.dietaryPreference, onChange: handleChange, className: "mt-1 block w-full rounded-md border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] bg-[var(--color-card)]" },
                                React.createElement('option', { value: "Veg" }, strings.dietVeg), React.createElement('option', { value: "Non-Veg" }, strings.dietNonVeg), React.createElement('option', { value: "Vegan" }, strings.dietVegan), React.createElement('option', { value: "Jain" }, strings.dietJain)
                            )),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "goal", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelGoal), React.createElement('select', { id: "goal", value: formData.goal, onChange: handleChange, className: "mt-1 block w-full rounded-md border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)] bg-[var(--color-card)]" },
                                React.createElement('option', { value: "Weight Loss" }, strings.goalLoss), React.createElement('option', { value: "Weight Gain" }, strings.goalGain), React.createElement('option', { value: "Maintenance" }, strings.goalMaintain), React.createElement('option', { value: "Muscle Gain" }, strings.goalMuscle)
                            )),
                            React.createElement('div', { className: "md:col-span-2 mt-4" }, React.createElement('h3', { className: "text-lg font-semibold text-[var(--color-primary)] mb-2 border-b border-[var(--color-border)] pb-1" }, strings.medicalHeader)),
                            React.createElement('div', { className: "md:col-span-2" }, React.createElement('label', { htmlFor: "medicalConditions", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelCondition), React.createElement('input', { type: "text", id: "medicalConditions", value: formData.medicalConditions, onChange: handleChange, placeholder: "e.g., Type 2 Diabetes, Hypothyroidism, PCOS", className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', { className: "md:col-span-2" }, React.createElement('label', { htmlFor: "allergies", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelAllergies), React.createElement('input', { type: "text", id: "allergies", value: formData.allergies, onChange: handleChange, placeholder: "e.g., Gluten, Dairy, Peanuts, Seafood", className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', { className: "md:col-span-2" }, React.createElement('label', { htmlFor: "likesDislikes", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelDislikes), React.createElement('input', { type: "text", id: "likesDislikes", value: formData.likesDislikes, onChange: handleChange, placeholder: "e.g., Dislike okra, Love paneer and almonds", className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', { className: "md:col-span-2 mt-4" }, React.createElement('h3', { className: "text-lg font-semibold text-[var(--color-primary)] mb-2 border-b border-[var(--color-border)] pb-1" }, strings.macroGoalsHeader)),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "proteinGoal", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelProteinGoal), React.createElement('input', { type: "number", id: "proteinGoal", value: formData.proteinGoal ?? '', onChange: handleChange, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "carbGoal", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelCarbGoal), React.createElement('input', { type: "number", id: "carbGoal", value: formData.carbGoal ?? '', onChange: handleChange, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', null, React.createElement('label', { htmlFor: "fatGoal", className: "block text-sm font-medium text-[var(--color-text-secondary)]" }, strings.labelFatGoal), React.createElement('input', { type: "number", id: "fatGoal", value: formData.fatGoal ?? '', onChange: handleChange, className: "mt-1 block w-full rounded-md bg-transparent border-[var(--color-border)] shadow-sm p-3 border focus:border-[var(--color-primary)] focus:ring-1 focus:ring-[var(--color-primary)]" })),
                            React.createElement('div', { className: "md:col-span-2 pt-4" },
                                React.createElement('button', { type: "submit", className: "w-full py-3 px-4 bg-[var(--color-primary)] text-white font-bold rounded-xl hover:bg-[var(--color-primary-hover)] transition-all duration-300 btn-primary-glow shadow-md shadow-[var(--color-primary)]/30" }, strings.btnSaveProfile),
                                statusMessage && React.createElement('p', { className: "mt-2 text-center text-sm text-green-600" }, statusMessage),
                                React.createElement('button', { type: "button", onClick: handleGetAiSummary, disabled: !isAssessmentDone || isSummaryLoading, className: "mt-4 w-full py-3 px-4 bg-slate-600 text-white font-bold rounded-xl hover:bg-slate-700 transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                    isSummaryLoading ? React.createElement(LoaderIcon) : React.createElement(SparklesIcon),
                                    isSummaryLoading ? "Generating..." : strings.btnAiSummary
                                )
                            )
                        ),
                        isSummaryLoading && React.createElement('div', { className: "mt-6 flex justify-center" }, React.createElement(Spinner)),
                        aiSummary && React.createElement('div', { className: "mt-6 p-4 bg-teal-50 dark:bg-teal-900/20 rounded-xl border-l-4 border-teal-500" },
                            React.createElement('h4', { className: "text-lg font-bold text-teal-700 dark:text-teal-300 mb-2" }, strings.aiSummaryTitle),
                            React.createElement('p', { className: "text-[var(--color-text-primary)]" }, aiSummary)
                        ),
                        React.createElement('div', { className: "mt-8 pt-6 border-t border-[var(--color-border)]" },
                            React.createElement('h3', { className: "text-xl font-bold text-[var(--color-text-primary)] mb-4" }, strings.assessmentHeader),
                            React.createElement('div', { className: "grid grid-cols-2 sm:grid-cols-4 gap-4 text-center" },
                                React.createElement('div', { className: "p-4 bg-teal-50 dark:bg-teal-900/20 rounded-xl border border-teal-200 dark:border-teal-800" }, React.createElement('p', { className: "text-sm text-teal-600 dark:text-teal-300 font-medium" }, strings.calcBMI), React.createElement('p', { className: "text-2xl font-bold text-teal-800 dark:text-teal-100" }, assessment.bmi || '--')),
                                React.createElement('div', { className: "p-4 bg-teal-50 dark:bg-teal-900/20 rounded-xl border border-teal-200 dark:border-teal-800" }, React.createElement('p', { className: "text-sm text-teal-600 dark:text-teal-300 font-medium" }, strings.calcBMIStatus), React.createElement('p', { className: "text-lg font-bold text-teal-800 dark:text-teal-100 mt-1" }, assessment.bmiStatus || '--')),
                                React.createElement('div', { className: "p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800" }, React.createElement('p', { className: "text-sm text-blue-600 dark:text-blue-300 font-medium" }, strings.calcTDEE), React.createElement('p', { className: "text-2xl font-bold text-blue-800 dark:text-blue-100" }, assessment.tdee ? `${assessment.tdee} kcal` : '--')),
                                React.createElement('div', { className: "p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-200 dark:border-amber-800" }, React.createElement('p', { className: "text-sm text-amber-600 dark:text-amber-300 font-medium" }, strings.calcReqCals), React.createElement('p', { className: "text-2xl font-bold text-amber-800 dark:text-amber-100" }, assessment.target ? `${assessment.target} kcal` : '--'))
                            ),
                            React.createElement('div', { className: "mt-4 grid grid-cols-1 sm:grid-cols-3 gap-4 text-center" },
                                React.createElement('div', { className: "p-4 bg-pink-50 dark:bg-pink-900/20 rounded-xl border border-pink-200 dark:border-pink-800" }, React.createElement('p', { className: "text-sm text-pink-600 dark:text-pink-300 font-medium" }, strings.calcProtein), React.createElement('p', { className: "text-2xl font-bold text-pink-800 dark:text-pink-100" }, proteinGoal ? `${proteinGoal}g` : '--')),
                                React.createElement('div', { className: "p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800" }, React.createElement('p', { className: "text-sm text-green-600 dark:text-green-300 font-medium" }, strings.calcCarbs), React.createElement('p', { className: "text-2xl font-bold text-green-800 dark:text-green-100" }, carbGoal ? `${carbGoal}g` : '--')),
                                React.createElement('div', { className: "p-4 bg-sky-50 dark:bg-sky-900/20 rounded-xl border border-sky-200 dark:border-sky-800" }, React.createElement('p', { className: "text-sm text-sky-600 dark:text-sky-300 font-medium" }, strings.calcFat), React.createElement('p', { className: "text-2xl font-bold text-sky-800 dark:text-sky-100" }, fatGoal ? `${fatGoal}g` : '--'))
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/PlanView.tsx
        const PlanView = () => {
            const { profile, strings } = useAppContext();
            const [isLoading, setIsLoading] = useState(false);
            const [planOutput, setPlanOutput] = useState('');
            const handleGeneratePlan = async () => {
                if (!profile.assessment?.target) return;
                setIsLoading(true);
                setPlanOutput('');
                const result = await generateDetailedPlan(profile);
                setPlanOutput(result);
                setIsLoading(false);
            };
            const isProfileComplete = !!profile.assessment?.target;
            return (
                React.createElement('section', null,
                    React.createElement('div', { className: "flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4" },
                        React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-2 sm:mb-0" }, strings.planHeader),
                        React.createElement('button', { onClick: handleGeneratePlan, disabled: !isProfileComplete || isLoading, className: "flex items-center px-4 py-2 bg-[var(--color-secondary)] text-white font-semibold rounded-xl hover:bg-[var(--color-secondary-hover)] transition-all duration-300 shadow-md disabled:opacity-50 disabled:cursor-not-allowed" },
                            isLoading ? React.createElement(LoaderIcon) : React.createElement(SparklesIcon),
                            isLoading ? 'Generating...' : strings.btnGeneratePlan
                        )
                    ),
                    !isProfileComplete && !planOutput && !isLoading && (
                        React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                            React.createElement('p', { className: "text-[var(--color-text-secondary)] text-lg p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border-l-4 border-[var(--color-secondary)]" }, strings.planInitialPrompt)
                        )
                    ),
                    (isLoading || planOutput) && (
                        React.createElement('div', { className: "mt-6" },
                            isLoading ? (
                                 React.createElement('div', { className: "flex flex-col items-center justify-center p-8 text-center text-[var(--color-text-secondary)] bg-[var(--color-background)] rounded-xl shadow-inner" },
                                    React.createElement(Spinner),
                                    React.createElement('p', { className: "text-xl font-semibold mt-4 mb-2" }, "Creating your hyper-personalized 3-Day Plan..."),
                                    React.createElement('p', null, "This may take up to 30 seconds.")
                                )
                            ) : (
                                React.createElement('div', { className: "p-6 bg-teal-50 dark:bg-teal-900/20 rounded-xl border-t-4 border-[var(--color-primary)] shadow-xl" },
                                    React.createElement('h3', { className: "text-2xl font-bold text-teal-700 dark:text-teal-200 mb-4 flex items-center" }, "AI Generated Plan Complete"),
                                    React.createElement('div', { className: "prose", dangerouslySetInnerHTML: { __html: planOutput.replace(/\n/g, '<br />').replace(/### (.*?)<br \/>/g, '<h3>$1</h3>') } })
                                )
                            )
                        )
                    )
                )
            );
        };

        // FROM: views/TrackerView.tsx
        const TrackerView = () => {
            const { profile, tracking, setTracking, strings } = useAppContext();
            const [newMealEntry, setNewMealEntry] = useState('');
            const [analysisResult, setAnalysisResult] = useState('');
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [reminders, setReminders] = useState([]);
            const [showReminders, setShowReminders] = useState(false);
            const REMINDERS_STORAGE_KEY = 'trackandtreat-reminders';
            useEffect(() => {
                try {
                    const storedReminders = localStorage.getItem(REMINDERS_STORAGE_KEY);
                    if (storedReminders) {
                        setReminders(JSON.parse(storedReminders));
                    }
                } catch (error) {
                    console.error("Failed to load reminders from localStorage", error);
                }
            }, []);
            useEffect(() => {
                setAnalysisResult('');
            }, [tracking.mealLog]);
            const updateReminders = (updatedReminders) => {
                setReminders(updatedReminders);
                try {
                    localStorage.setItem(REMINDERS_STORAGE_KEY, JSON.stringify(updatedReminders));
                } catch (error) {
                    console.error("Failed to save reminders to localStorage", error);
                }
            };
            const addReminder = (time, type) => {
                const newReminder = { id: crypto.randomUUID(), time, type };
                const updated = [...reminders, newReminder].sort((a, b) => a.time.localeCompare(b.time));
                updateReminders(updated);
            };
            const deleteReminder = (id) => {
                const updated = reminders.filter(r => r.id !== id);
                updateReminders(updated);
            };
            const handleLogMeal = () => {
                if (!newMealEntry.trim()) return;
                const newLog = {
                    id: crypto.randomUUID(),
                    text: newMealEntry,
                    time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
                    kcal: Math.floor(Math.random() * (500 - 200 + 1) + 200), // Mock calories
                };
                setTracking(prev => ({ ...prev, mealLog: [newLog, ...prev.mealLog] }));
                setNewMealEntry('');
            };
            const handleRemoveMeal = (id) => {
                setTracking(prev => ({ ...prev, mealLog: prev.mealLog.filter(meal => meal.id !== id) }));
            };
            const handleAddWater = (ml) => {
                setTracking(prev => ({ ...prev, waterIntake: prev.waterIntake + ml }));
            };
            const handleAddServing = () => {
                setTracking(prev => ({ ...prev, fruitVegServings: Math.min(5, prev.fruitVegServings + 1) }));
            };
            const handleAnalyzeLog = async () => {
                if(tracking.mealLog.length === 0) return;
                setIsAnalyzing(true);
                setAnalysisResult('');
                const result = await analyzeMealLog(tracking.mealLog, profile);
                setAnalysisResult(result);
                setIsAnalyzing(false);
            };
            const waterGoal = 3500;
            const waterProgress = Math.min(100, (tracking.waterIntake / waterGoal) * 100);
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.trackerHeader),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl grid grid-cols-1 lg:grid-cols-3 gap-6" },
                        React.createElement('div', { className: "lg:col-span-2" },
                            React.createElement('div', { className: "flex items-center justify-between mb-4" },
                                React.createElement('h3', { className: "text-xl font-bold text-[var(--color-text-primary)]" }, strings.logHeader),
                                React.createElement('button', { onClick: handleAnalyzeLog, disabled: isAnalyzing || tracking.mealLog.length === 0, className: "flex items-center text-sm px-3 py-1 bg-pink-600 text-white font-semibold rounded-xl hover:bg-pink-700 transition-all duration-300 shadow-md disabled:opacity-50" },
                                     isAnalyzing ? React.createElement(LoaderIcon) : React.createElement(BrainCircuitIcon), isAnalyzing ? "Analyzing..." : strings.btnAnalyzeLog
                                )
                            ),
                            analysisResult && (
                                React.createElement('div', { className: "p-3 mb-4 bg-pink-50 dark:bg-pink-900/20 rounded-lg border border-pink-200 dark:border-pink-800" },
                                    React.createElement('p', { className: "font-semibold text-pink-700 dark:text-pink-300" }, strings.logAnalysisTitle),
                                    React.createElement('p', { className: "text-sm text-pink-600 dark:text-pink-400 mt-1" }, analysisResult)
                                )
                            ),
                            React.createElement('div', { className: "space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2" },
                                tracking.mealLog.length > 0 ? tracking.mealLog.map(log => (
                                    React.createElement('div', { key: log.id, className: "flex items-center justify-between p-3 bg-[var(--color-background)] rounded-lg border border-[var(--color-border)]" },
                                        React.createElement('div', null,
                                            React.createElement('p', { className: "font-medium text-[var(--color-text-primary)]" }, log.text),
                                            React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)]" }, `${log.time} | ~ ${log.kcal} kcal`)
                                        ),
                                        React.createElement('button', { onClick: () => handleRemoveMeal(log.id), className: "text-red-500 hover:text-red-700" },
                                            React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "20", height: "20", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round"}, React.createElement('circle', { cx: "12", cy: "12", r: "10" }), React.createElement('line', { x1: "15", y1: "9", x2: "9", y2: "15" }), React.createElement('line', { x1: "9", y1: "9", x2: "15", y2: "15" }))
                                        )
                                    )
                                )) : React.createElement('p', { className: "text-center text-[var(--color-text-secondary)] p-4" }, strings.logEmpty)
                            ),
                            React.createElement('div', { className: "mt-4" },
                                React.createElement('textarea', { value: newMealEntry, onChange: e => setNewMealEntry(e.target.value), placeholder: strings.logInputPlaceholder, className: "w-full p-3 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-primary)] bg-transparent focus:ring-1 focus:ring-[var(--color-primary)]" }),
                                React.createElement('button', { onClick: handleLogMeal, className: "mt-2 w-full py-2 bg-[var(--color-secondary)] text-white font-semibold rounded-xl hover:bg-[var(--color-secondary-hover)] transition-all duration-300" }, strings.logBtn)
                            )
                        ),
                        React.createElement('div', { className: "space-y-4" },
                            React.createElement('div', { className: "p-4 bg-blue-100 dark:bg-blue-900/20 rounded-xl" },
                                React.createElement('h3', { className: "text-lg font-bold text-blue-800 dark:text-blue-200 flex items-center" }, strings.waterHeader),
                                React.createElement('p', { className: "text-xs text-blue-600 dark:text-blue-400 mt-1" }, strings.waterGoal),
                                React.createElement('div', { className: "w-full bg-blue-200 dark:bg-blue-800 rounded-full h-3 mt-2" }, React.createElement('div', { className: "bg-[var(--color-accent)] h-3 rounded-full", style: { width: `${waterProgress}%` } })),
                                React.createElement('button', { onClick: () => handleAddWater(250), className: "mt-3 text-sm px-3 py-1 bg-[var(--color-accent)] text-white rounded-lg hover:opacity-90 transition-opacity" }, strings.btnAddWater)
                            ),
                            React.createElement('div', { className: "p-4 bg-green-100 dark:bg-green-900/20 rounded-xl" },
                                React.createElement('h3', { className: "text-lg font-bold text-green-800 dark:text-green-200 flex items-center" }, strings.servingsHeader),
                                React.createElement('p', { className: "text-3xl font-bold mt-2 text-center text-green-900 dark:text-green-100" }, `${tracking.fruitVegServings} / 5`),
                                React.createElement('button', { onClick: handleAddServing, className: "mt-3 text-sm px-3 py-1 bg-green-500 text-white rounded-lg hover:opacity-90 transition-opacity" }, strings.btnAddServing)
                            ),
                            React.createElement('div', { className: "p-4 bg-amber-100 dark:bg-amber-900/20 rounded-xl" },
                                React.createElement('h3', { className: "text-lg font-bold text-amber-800 dark:text-amber-200 flex items-center" }, strings.reminderHeader),
                                React.createElement('p', { className: "text-sm text-amber-700 dark:text-amber-300 mt-2" }, strings.reminderText),
                                React.createElement('button', { onClick: () => setShowReminders(!showReminders), className: "mt-3 text-sm px-3 py-1 bg-[var(--color-secondary)] text-white rounded-lg hover:opacity-90 transition-opacity" },
                                    showReminders ? strings.btnHideReminders : strings.btnSetReminder
                                )
                            ),
                            showReminders && React.createElement(RemindersCard, { reminders: reminders, onAddReminder: addReminder, onDeleteReminder: deleteReminder })
                        )
                    )
                )
            );
        };
        
        // FROM: views/RecipesView.tsx
        const RecipeCard = ({ content, borderColor }) => {
            const lines = content.trim().split('\\n');
            const title = lines.shift()?.replace(/^[#\\s]+/, '') || 'Untitled Recipe';
            const body = lines.join('\\n').trim();
            const sections = {};
            const parts = body.split(/^(##\\s.*)$/m);
            for (let i = 1; i < parts.length; i += 2) {
                const header = parts[i].replace('## ', '').trim();
                const sectionContent = parts[i + 1]?.trim().split('\\n').filter(line => line.trim() !== '');
                if (header && sectionContent) {
                    sections[header] = sectionContent;
                }
            }
            const ingredients = sections['Ingredients'] || [];
            const method = sections['Method'] || [];
            const note = sections['Health Note'] || sections["Chef's Note"] || [];
            const noteTitle = sections['Health Note'] ? "Health Note" : "Chef's Note";
            return (
                React.createElement('div', { className: "p-5 mb-4 bg-[var(--color-card)] rounded-xl border-l-4 shadow-lg transition-shadow hover:shadow-xl", style: { borderLeftColor: borderColor } },
                    React.createElement('h4', { className: "text-xl font-bold text-[var(--color-text-primary)] mb-4" }, title),
                    ingredients.length > 0 && React.createElement('div', { className: "mb-4" },
                        React.createElement('h5', { className: "font-bold text-[var(--color-text-primary)] mb-2" }, "Ingredients"),
                        React.createElement('ul', { className: "list-disc list-inside space-y-1 text-[var(--color-text-secondary)] text-sm pl-2" },
                            ingredients.map((item, index) => React.createElement('li', { key: index }, item.replace(/[-*]\\s*/, '')))
                        )
                    ),
                    method.length > 0 && React.createElement('div', { className: "mb-4" },
                        React.createElement('h5', { className: "font-bold text-[var(--color-text-primary)] mb-2" }, "Method"),
                        React.createElement('ol', { className: "list-decimal list-inside space-y-2 text-[var(--color-text-secondary)] text-sm pl-2" },
                            method.map((item, index) => React.createElement('li', { key: index, className: "pl-1" }, item.replace(/^\\d+\\.\\s*/, '')))
                        )
                    ),
                    note.length > 0 && React.createElement('div', { className: "mt-4 pt-3 border-t border-[var(--color-border)]" },
                        React.createElement('h5', { className: "font-bold text-[var(--color-text-primary)] mb-2" }, noteTitle),
                        React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)] italic" }, note.join(' '))
                    )
                )
            );
        };
        const RecipesView = () => {
            const { profile, strings } = useAppContext();
            const [ingredient, setIngredient] = useState('');
            const [diagLoading, setDiagLoading] = useState(false);
            const [ingrLoading, setIngrLoading] = useState(false);
            const [diagResults, setDiagResults] = useState([]);
            const [ingrResults, setIngrResults] = useState([]);
            const condition = profile.medicalConditions || 'None';
            const isConditionSet = condition && condition.toLowerCase() !== 'none' && condition.trim() !== '';
            const handleGenerateDiagRecipes = async () => {
                if (!isConditionSet) return;
                setDiagLoading(true);
                setDiagResults([]);
                const result = await generateRecipesByCondition(condition);
                setDiagResults(result.split('### ').filter(p => p.trim()));
                setDiagLoading(false);
            };
            const handleGenerateIngrRecipes = async () => {
                if (!ingredient.trim()) return;
                setIngrLoading(true);
                setIngrResults([]);
                const result = await generateRecipesByIngredient(ingredient);
                setIngrResults(result.split('### ').filter(p => p.trim()));
                setIngrLoading(false);
            };
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.recipesMainHeader),
                    React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-6" },
                        React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl flex flex-col" },
                            React.createElement('h3', { className: "text-xl font-bold text-[var(--color-secondary)] mb-4 flex items-center" }, strings.recipeDiagHeader),
                            React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)] mb-3" }, `${strings.recipeDiagStatus} (`, React.createElement('span', { className: "font-semibold" }, condition), ")."),
                            React.createElement('button', { onClick: handleGenerateDiagRecipes, disabled: !isConditionSet || diagLoading, className: "w-full py-2 bg-[var(--color-secondary)] text-white font-semibold rounded-xl hover:bg-[var(--color-secondary-hover)] transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                diagLoading && React.createElement(LoaderIcon), diagLoading ? "Generating..." : strings.btnGenerateDiag
                            ),
                            React.createElement('div', { className: "mt-4 flex-1 custom-scroll overflow-y-auto pr-2" },
                                diagLoading && React.createElement('div', { className: "flex justify-center p-4" }, React.createElement(Spinner)),
                                diagResults.length > 0 && diagResults.map((recipe, index) => React.createElement(RecipeCard, { key: `diag-${index}`, content: recipe, borderColor: "var(--color-secondary)" }))
                            )
                        ),
                        React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl flex flex-col" },
                            React.createElement('h3', { className: "text-xl font-bold text-[var(--color-accent)] mb-4 flex items-center" }, strings.recipeIngrHeader),
                            React.createElement('textarea', { value: ingredient, onChange: e => setIngredient(e.target.value), placeholder: strings.ingrInputPlaceholder, className: "w-full p-3 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-accent)] bg-transparent mb-3 focus:ring-1 focus:ring-[var(--color-accent)]" }),
                            React.createElement('button', { onClick: handleGenerateIngrRecipes, disabled: !ingredient.trim() || ingrLoading, className: "w-full py-2 bg-[var(--color-accent)] text-white font-semibold rounded-xl hover:opacity-90 transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                ingrLoading && React.createElement(LoaderIcon), ingrLoading ? "Generating..." : strings.btnSuggestRecipes
                            ),
                            React.createElement('div', { className: "mt-4 flex-1 custom-scroll overflow-y-auto pr-2" },
                                ingrLoading && React.createElement('div', { className: "flex justify-center p-4" }, React.createElement(Spinner)),
                                ingrResults.length > 0 && ingrResults.map((recipe, index) => React.createElement(RecipeCard, { key: `ingr-${index}`, content: recipe, borderColor: "var(--color-accent)" }))
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/ReportsView.tsx
        const ReportsView = () => {
            const { strings } = useAppContext();
            const [reportInput, setReportInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [analysisResult, setAnalysisResult] = useState('');
            const handleAnalyzeReport = async () => {
                if (!reportInput.trim()) return;
                setIsLoading(true);
                setAnalysisResult('');
                const result = await analyzeMedicalReport(reportInput);
                setAnalysisResult(result);
                setIsLoading(false);
            };
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.reportsMainHeader),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                        React.createElement('h3', { className: "text-xl font-bold text-[var(--color-primary)] mb-3 flex items-center" }, strings.reportsAnalyzeHeader),
                        React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)] mb-4" }, strings.reportsInstructions),
                        React.createElement('textarea', { value: reportInput, onChange: e => setReportInput(e.target.value), rows: 4, placeholder: strings.reportsInputPlaceholder, className: "w-full p-3 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-primary)] mb-3 bg-transparent focus:ring-1 focus:ring-[var(--color-primary)]" }),
                        React.createElement('button', { onClick: handleAnalyzeReport, disabled: !reportInput.trim() || isLoading, className: "w-full py-2 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition-all duration-300 shadow-md disabled:opacity-50 flex justify-center items-center" },
                            isLoading && React.createElement(LoaderIcon), isLoading ? "Analyzing..." : strings.btnInterpretReport
                        ),
                        React.createElement('div', { className: "mt-6 p-4 bg-[var(--color-background)] rounded-lg min-h-[100px]" },
                            isLoading ? (
                                React.createElement('div', { className: "flex justify-center items-center h-full" }, React.createElement(Spinner))
                            ) : (
                                analysisResult && React.createElement('div', { className: "p-4 bg-red-100 dark:bg-red-900/20 text-[var(--color-text-primary)] rounded-lg border-l-4 border-red-500", dangerouslySetInnerHTML: { __html: analysisResult.replace(/### (.*?)\\n/g, '<h3 class="font-bold text-md mb-1 mt-3">$1</h3>').replace(/\\n/g, '<br />') } })
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/GuidanceView.tsx
        const GuidanceView = () => {
            const { strings } = useAppContext();
            const [guidanceInput, setGuidanceInput] = useState('');
            const [loadingType, setLoadingType] = useState(null);
            const [guidanceResult, setGuidanceResult] = useState('');
            const [resultType, setResultType] = useState(null);
            const handleGetGuidance = async (type) => {
                if (!guidanceInput.trim()) return;
                setLoadingType(type);
                setGuidanceResult('');
                const result = await getNutritionalGuidance(guidanceInput, type);
                setGuidanceResult(result);
                setResultType(type);
                setLoadingType(null);
            };
            const getBorderColor = () => {
                switch (resultType) {
                    case 'nutrients_and_avoid': return 'var(--color-accent)';
                    case 'food_sources': return 'var(--color-secondary)';
                    case 'interactions': return '#ef4444'; // red-500
                    default: return 'transparent';
                }
            };
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.guidanceMainHeader),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                        React.createElement('h3', { className: "text-xl font-bold text-[var(--color-primary)] mb-3 flex items-center" }, strings.guidanceFindHeader),
                        React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)] mb-4" }, strings.guidanceInstructions),
                        React.createElement('textarea', { value: guidanceInput, onChange: e => setGuidanceInput(e.target.value), rows: 3, placeholder: strings.guidanceInputPlaceholder, className: "w-full p-3 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-primary)] mb-3 bg-transparent focus:ring-1 focus:ring-[var(--color-primary)]" }),
                        React.createElement('div', { className: "grid grid-cols-1 sm:grid-cols-3 gap-4" },
                            React.createElement('button', { onClick: () => handleGetGuidance('nutrients_and_avoid'), disabled: !guidanceInput.trim() || !!loadingType, className: "w-full py-2 bg-[var(--color-accent)] text-white font-semibold rounded-xl hover:opacity-90 transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                loadingType === 'nutrients_and_avoid' ? React.createElement(LoaderIcon) : strings.btnNutrientsAvoid
                            ),
                            React.createElement('button', { onClick: () => handleGetGuidance('food_sources'), disabled: !guidanceInput.trim() || !!loadingType, className: "w-full py-2 bg-[var(--color-secondary)] text-white font-semibold rounded-xl hover:bg-[var(--color-secondary-hover)] transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                loadingType === 'food_sources' ? React.createElement(LoaderIcon) : strings.btnFoodSources
                            ),
                            React.createElement('button', { onClick: () => handleGetGuidance('interactions'), disabled: !guidanceInput.trim() || !!loadingType, className: "w-full py-2 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition-all duration-300 shadow-md disabled:opacity-50 flex items-center justify-center" },
                                loadingType === 'interactions' ? React.createElement(LoaderIcon) : strings.btnInteractions
                            )
                        ),
                        React.createElement('div', { className: "mt-6 p-4 bg-[var(--color-background)] rounded-lg min-h-[150px]" },
                            loadingType ? (
                                React.createElement('div', { className: "flex justify-center items-center h-full pt-8" }, React.createElement(Spinner))
                            ) : (
                                guidanceResult ? (
                                    React.createElement('div', { style: { borderLeftColor: getBorderColor() }, className: "p-4 bg-[var(--color-card)] rounded-lg border-l-4 shadow-md space-y-2" },
                                        React.createElement('div', { className: "prose", dangerouslySetInnerHTML: { __html: guidanceResult.replace(/### (.*?)\\n/g, '<h3 class="font-bold text-md mb-1 mt-3">$1</h3>').replace(/\\n/g, '<br />') } })
                                    )
                                ) : (
                                    React.createElement('p', { className: "text-[var(--color-text-secondary)] text-sm text-center pt-8" }, strings.guidanceOutputInitial)
                                )
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/SearchView.tsx
        const SearchView = () => {
            const { strings } = useAppContext();
            const [query, setQuery] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const [result, setResult] = useState(null);
            const handleSearch = async () => {
                if (!query.trim()) return;
                setIsLoading(true);
                setResult(null);
                const searchResult = await performGroundedSearch(query);
                setResult(searchResult);
                setIsLoading(false);
            };
            return (
                React.createElement('section', null,
                    React.createElement('h2', { className: "text-2xl font-semibold text-[var(--color-text-primary)] mb-4" }, strings.searchMainHeader),
                    React.createElement('div', { className: "bg-[var(--color-card)] p-6 rounded-2xl shadow-xl" },
                        React.createElement('h3', { className: "text-xl font-bold text-[var(--color-primary)] mb-3" }, strings.searchMainHeader),
                        React.createElement('p', { className: "text-sm text-[var(--color-text-secondary)] mb-4" }, strings.searchInstructions),
                        React.createElement('textarea', { value: query, onChange: e => setQuery(e.target.value), rows: 3, placeholder: strings.searchInputPlaceholder, className: "w-full p-3 border border-[var(--color-border)] rounded-lg focus:border-[var(--color-primary)] mb-3 bg-transparent focus:ring-1 focus:ring-[var(--color-primary)]" }),
                        React.createElement('button', { onClick: handleSearch, disabled: !query.trim() || isLoading, className: "w-full py-2 bg-[var(--color-accent)] text-white font-semibold rounded-xl hover:bg-blue-600 dark:hover:bg-blue-500 transition-all duration-300 shadow-md disabled:opacity-50 flex justify-center items-center" },
                            isLoading ? React.createElement(LoaderIcon) : null, isLoading ? "Searching..." : strings.btnSearch
                        ),
                        React.createElement('div', { className: "mt-6 p-4 bg-[var(--color-background)] rounded-lg min-h-[200px]" },
                            isLoading ? (
                                React.createElement('div', { className: "flex justify-center items-center h-full pt-8" }, React.createElement(Spinner))
                            ) : result ? (
                                React.createElement('div', null,
                                    React.createElement('h4', { className: "text-lg font-bold text-[var(--color-text-primary)] mb-2" }, strings.searchResultsTitle),
                                    React.createElement('div', { className: "prose prose-sm max-w-none text-[var(--color-text-primary)] mb-6", dangerouslySetInnerHTML: { __html: result.text.replace(/\\n/g, '<br />') } }),
                                    result.sources && result.sources.length > 0 && (
                                        React.createElement(React.Fragment, null,
                                            React.createElement('h4', { className: "text-lg font-bold text-[var(--color-text-primary)] mb-2 border-t border-[var(--color-border)] pt-4" }, strings.sourcesTitle),
                                            React.createElement('ul', { className: "list-disc list-inside space-y-2" },
                                                result.sources.map((source, index) => (
                                                    React.createElement('li', { key: index, className: "text-sm" },
                                                        React.createElement('a', { href: source.web.uri, target: "_blank", rel: "noopener noreferrer", className: "text-blue-500 hover:underline break-all" },
                                                            source.web.title || source.web.uri
                                                        )
                                                    )
                                                ))
                                            )
                                        )
                                    )
                                )
                            ) : (
                                React.createElement('p', { className: "text-[var(--color-text-secondary)] text-sm text-center pt-8" }, strings.searchInitialPrompt)
                            )
                        )
                    )
                )
            );
        };
        
        // FROM: views/ChatView.tsx
        const ChatView = () => {
            const { profile, strings } = useAppContext();
            const getInitialMessages = () => [
                { role: 'model', text: strings.chatWelcome }
            ];
            const [messages, setMessages] = useState(getInitialMessages());
            const [input, setInput] = useState('');
            const [isLoading, setIsLoading] = useState(false);
            const chatRef = useRef(null);
            const messagesEndRef = useRef(null);
            useEffect(() => {
                chatRef.current = startChat(messages);
            }, []);
            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);
            const handleSendMessage = async (e) => {
                e.preventDefault();
                if (!input.trim() || isLoading) return;
                const userMessage = { role: 'user', text: input };
                setMessages(prev => [...prev, userMessage]);
                setInput('');
                setIsLoading(true);
                if (!chatRef.current) {
                    chatRef.current = startChat(messages);
                }
                const responseText = await sendMessageToChat(chatRef.current, userMessage.text);
                const modelMessage = { role: 'model', text: responseText };
                setMessages(prev => [...prev, modelMessage]);
                setIsLoading(false);
            };
            const handleClearChat = () => {
                const initialMessages = getInitialMessages();
                setMessages(initialMessages);
                chatRef.current = startChat(initialMessages);
            };
            return (
                React.createElement('section', { className: "flex flex-col h-full bg-[var(--color-card)] rounded-2xl shadow-xl" },
                    React.createElement('header', { className: "flex items-center justify-between p-4 border-b border-[var(--color-border)]" },
                        React.createElement('h2', { className: "text-xl font-bold text-[var(--color-text-primary)]" }, strings.chatMainHeader),
                        React.createElement('button', { onClick: handleClearChat, className: "flex items-center gap-2 text-sm text-[var(--color-text-secondary)] hover:text-red-600 transition-colors px-3 py-1 rounded-lg hover:bg-red-500/10", title: strings.btnClearChat },
                            React.createElement(TrashIcon),
                            React.createElement('span', { className: "hidden sm:inline" }, strings.btnClearChat)
                        )
                    ),
                    React.createElement('div', { className: "flex-1 overflow-y-auto p-4 space-y-4 custom-scroll bg-[var(--color-background)]" },
                        messages.map((msg, index) => (
                            React.createElement('div', { key: index, className: `flex items-start gap-3 ${msg.role === 'user' ? 'justify-end' : ''}` },
                                msg.role === 'model' && React.createElement('div', { className: "w-8 h-8 rounded-full bg-[var(--color-card)] border border-[var(--color-border)] flex items-center justify-center flex-shrink-0" }, React.createElement(BotMessageSquareIconClean)),
                                React.createElement('div', { className: `max-w-md p-3 rounded-2xl ${msg.role === 'user' ? 'bg-[var(--color-primary)] text-white rounded-br-none' : 'bg-[var(--color-card)] text-[var(--color-text-primary)] rounded-bl-none'}` },
                                   React.createElement('p', { className: "text-sm" }, msg.text)
                                ),
                                 msg.role === 'user' && React.createElement('div', { className: "w-8 h-8 rounded-full flex-shrink-0" },
                                     profile.photoUrl ? React.createElement('img', { src: profile.photoUrl, alt: "User", className: "w-full h-full rounded-full object-cover" }) : React.createElement(DefaultAvatarIcon, { className: "w-full h-full" })
                                )
                            )
                        )),
                        isLoading && (
                            React.createElement('div', { className: "flex items-start gap-3" },
                                React.createElement('div', { className: "w-8 h-8 rounded-full bg-[var(--color-card)] border border-[var(--color-border)] flex items-center justify-center flex-shrink-0" }, React.createElement(BotMessageSquareIconClean)),
                                React.createElement('div', { className: "max-w-md p-3 rounded-2xl bg-[var(--color-card)] text-[var(--color-text-primary)] rounded-bl-none flex items-center" },
                                   React.createElement('div', { className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.3s]" }),
                                   React.createElement('div', { className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce [animation-delay:-0.15s] mx-1" }),
                                   React.createElement('div', { className: "w-2 h-2 bg-gray-400 rounded-full animate-bounce" })
                                )
                            )
                        ),
                        React.createElement('div', { ref: messagesEndRef })
                    ),
                    React.createElement('div', { className: "p-4 border-t border-[var(--color-border)] bg-[var(--color-card)] rounded-b-2xl" },
                        React.createElement('form', { onSubmit: handleSendMessage, className: "flex items-center gap-3" },
                            React.createElement('input', { type: "text", value: input, onChange: (e) => setInput(e.target.value), placeholder: strings.chatInputPlaceholder, className: "flex-1 p-3 border border-[var(--color-border)] rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] bg-transparent", disabled: isLoading }),
                            React.createElement('button', { type: "submit", disabled: isLoading || !input.trim(), className: "p-3 bg-[var(--color-primary)] text-white rounded-xl hover:bg-[var(--color-primary-hover)] disabled:bg-gray-300 dark:disabled:bg-gray-600 transition-colors" },
                                React.createElement('svg', { xmlns: "http://www.w3.org/2000/svg", width: "24", height: "24", viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round" }, React.createElement('line', { x1: "22", y1: "2", x2: "11", y2: "13" }), React.createElement('polygon', { points: "22 2 15 22 11 13 2 9 22 2" }))
                            )
                        )
                    )
                )
            );
        };

        // FROM: App.tsx
        const App = () => {
            const [activeView, setActiveView] = useState('dashboard');
            const [isMobileSidebarOpen, setIsMobileSidebarOpen] = useState(false);
            const renderView = () => {
                switch (activeView) {
                    case 'dashboard': return React.createElement(DashboardView);
                    case 'profile': return React.createElement(ProfileView);
                    case 'plan': return React.createElement(PlanView);
                    case 'tracker': return React.createElement(TrackerView);
                    case 'recipes': return React.createElement(RecipesView);
                    case 'reports': return React.createElement(ReportsView);
                    case 'guidance': return React.createElement(GuidanceView);
                    case 'search': return React.createElement(SearchView);
                    case 'chat': return React.createElement(ChatView);
                    default: return React.createElement(DashboardView);
                }
            };
            return (
                React.createElement(AppProvider, null,
                    React.createElement('div', { className: "min-h-screen flex flex-col md:flex-row bg-[var(--color-background)]" },
                        React.createElement(Sidebar, { activeView: activeView, setActiveView: setActiveView, isMobileOpen: isMobileSidebarOpen, setMobileOpen: setIsMobileSidebarOpen }),
                        React.createElement('div', { className: "flex-1 flex flex-col min-w-0" },
                            React.createElement('header', { className: "md:hidden flex items-center justify-between p-4 bg-[var(--color-card)] shadow-md sticky top-0 z-20" },
                                React.createElement('button', { onClick: () => setIsMobileSidebarOpen(true), className: "text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] p-1" },
                                    React.createElement(MenuIcon)
                                ),
                                React.createElement('div', { className: "flex items-center gap-2" },
                                    React.createElement(LogoIcon, { className: "w-7 h-7" }),
                                    React.createElement('span', { className: "text-xl font-black text-[var(--color-primary)] text-shadow-custom" },
                                        "Track", React.createElement('span', { className: "text-[var(--color-secondary)]" }, " & Treat")
                                    )
                                ),
                                React.createElement('div', { className: "w-8 h-8" })
                            ),
                            React.createElement('main', { className: `flex-1 bg-[var(--color-background)] ${activeView === 'chat' ? 'p-4 md:p-8 flex flex-col' : 'p-4 md:p-8 overflow-y-auto'}` },
                                renderView()
                            )
                        )
                    )
                )
            );
        };

        // FROM: index.tsx
        const rootElement = document.getElementById('root');
        if (!rootElement) {
          throw new Error("Could not find root element to mount to");
        }
        const root = ReactDOM.createRoot(rootElement);
        root.render(
          React.createElement(React.StrictMode, null, React.createElement(App))
        );
    </script>
</body>
</html>